<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluación de Liderazgo - Con Respuestas</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: justify;
            font-size: 1.3rem;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
            color: #333;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .instructions {
            background-color: #e9f7fe;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }
        .question {
            background-color: #fff;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border-left: 3px solid #3498db;
        }
        .options {
            display: flex;
            gap: 20px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .true-false {
            display: flex;
            gap: 30px;
        }
        .btn-container {
            text-align: center;
            margin: 30px 0;
        }
        button {
            background-color: #2980b9;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #3498db;
        }
        .results {
            display: none;
            background-color: #fff;
            padding: 25px;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-top: 20px;
            border-left: 4px solid #2ecc71;
        }
        .correct {
            color: #27ae60;
            font-weight: bold;
        }
        .incorrect {
            color: #e74c3c;
        }
        .underline {
            text-decoration: underline;
        }
        .match-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        .match-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background-color: #f8f9fa;
            border-radius: 4px;
        }
        .match-select {
            width: 50px;
            padding: 5px;
        }
        .score-display {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .highlight {
            background-color: #fff8e1;
            padding: 2px 5px;
            border-radius: 3px;
        }
        .response-info {
            margin-top: 5px;
            font-size: 14px;
            color: #7f8c8d;
        }
        h3 {
            color: #2c3e50;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 5px;
        }
        .section-title {
            background-color: #34495e;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin: 25px 0 15px 0;
        }
        input[type="radio"], input[type="checkbox"] {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Curso: Liderazgo</h1>
        <h2>Evaluación Final</h2>
    </div>
    <div class="progress-indicator" id="progress-indicator">
        <p>✅ Esta actividad ha sido marcada como completada en tu progreso</p>
    </div>
    <form id="evaluation-form">
        <div class="section-title">
            <h2>Sección 1: Verdadero/Falso</h2>
        </div>
        
        <div class="instructions">
            <h3>Instrucciones:</h3>
            <p>Selecciona la opción de FALSO o VERDADERO que consideres adecuada para cada enunciado.</p>
        </div>

        <!-- Preguntas 1-5 -->
        <div class="question">
            <p>1. El liderazgo es la habilidad y la acción que se tiene para orientar, influir, conducir y dirigir a otros para el logro de una meta personal, aplicando todo tipo de recursos.</p>
            <div class="options true-false">
                <label><input type="radio" name="q1" value="false"> FALSO</label>
                <label><input type="radio" name="q1" value="true"> VERDADERO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">FALSO</span></div>
        </div>

        <div class="question">
            <p>2. El liderazgo involucra un conjunto de relaciones entre seres humanos, en donde uno de ellos asumirá la responsabilidad de conocer las capacidades, habilidades y destrezas propias, y de quienes forman el grupo, para impulsar su desarrollo y coordinar los esfuerzos para lograr objetivos comunes.</p>
            <div class="options true-false">
                <label><input type="radio" name="q2" value="false"> FALSO</label>
                <label><input type="radio" name="q2" value="true"> VERDADERO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">VERDADERO</span></div>
        </div>

        <div class="question">
            <p>3. El liderazgo es un rol susceptible de ser adoptado por cualquier ser humano independientemente de su nivel educativo, jerárquico u ocupacional.</p>
            <div class="options true-false">
                <label><input type="radio" name="q3" value="false"> FALSO</label>
                <label><input type="radio" name="q3" value="true"> VERDADERO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">VERDADERO</span></div>
        </div>

        <div class="question">
            <p>4. El liderazgo formal es impuesto por la autoridad y generalmente se asocia a los jefes o directivos.</p>
            <div class="options true-false">
                <label><input type="radio" name="q4" value="false"> FALSO</label>
                <label><input type="radio" name="q4" value="true"> VERDADERO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">VERDADERO</span></div>
        </div>

        <div class="question">
            <p>5. El liderazgo informal se fundamenta en el autoritarismo y don de mando de un jefe.</p>
            <div class="options true-false">
                <label><input type="radio" name="q5" value="false"> FALSO</label>
                <label><input type="radio" name="q5" value="true"> VERDADERO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">FALSO</span></div>
        </div>

        <div class="section-title">
            <h2>Sección 2: Estilo/Tipo de Liderazgo</h2>
        </div>
        
        <div class="instructions">
            <h3>Instrucciones:</h3>
            <p>Selecciona si cada enunciado se refiere a un ESTILO DE LIDERAZGO o a un TIPO DE LIDERAZGO.</p>
        </div>

        <!-- Preguntas 6-15 -->
        <div class="question">
            <p>6. Se nombra liderazgo formal cuando se le delega a una persona el cargo por mandato o posición.</p>
            <div class="options">
                <label><input type="radio" name="q6" value="estilo"> ESTILO DE LIDERAZGO</label>
                <label><input type="radio" name="q6" value="tipo"> TIPO DE LIDERAZGO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">TIPO DE LIDERAZGO</span></div>
        </div>

        <div class="question">
            <p>7. En el liderazgo personal se da cuando se tiene la cualidad de saber escuchar opiniones del personal integrante de un equipo.</p>
            <div class="options">
                <label><input type="radio" name="q7" value="estilo"> ESTILO DE LIDERAZGO</label>
                <label><input type="radio" name="q7" value="tipo"> TIPO DE LIDERAZGO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">ESTILO DE LIDERAZGO</span></div>
        </div>

        <div class="question">
            <p>8. Liderazgo informal es el otorgado y reconocido por los colaboradores o miembros de un grupo.</p>
            <div class="options">
                <label><input type="radio" name="q8" value="estilo"> ESTILO DE LIDERAZGO</label>
                <label><input type="radio" name="q8" value="tipo"> TIPO DE LIDERAZGO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">TIPO DE LIDERAZGO</span></div>
        </div>

        <div class="question">
            <p>9. Un líder humanista resalta la importancia del trabajador como ser humano.</p>
            <div class="options">
                <label><input type="radio" name="q9" value="estilo"> ESTILO DE LIDERAZGO</label>
                <label><input type="radio" name="q9" value="tipo"> TIPO DE LIDERAZGO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">ESTILO DE LIDERAZGO</span></div>
        </div>

        <div class="question">
            <p>10. El liderazgo por resultados conduce a los subordinados al logro de objetivos.</p>
            <div class="options">
                <label><input type="radio" name="q10" value="estilo"> ESTILO DE LIDERAZGO</label>
                <label><input type="radio" name="q10" value="tipo"> TIPO DE LIDERAZGO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">ESTILO DE LIDERAZGO</span></div>
        </div>

        <div class="question">
            <p>11. El líder tradicional hereda el poder por costumbre o por pertenecer a un grupo familiar.</p>
            <div class="options">
                <label><input type="radio" name="q11" value="estilo"> ESTILO DE LIDERAZGO</label>
                <label><input type="radio" name="q11" value="tipo"> TIPO DE LIDERAZGO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">TIPO DE LIDERAZGO</span></div>
        </div>

        <div class="question">
            <p>12. En el liderazgo democrático cada miembro aporta de sí para un resultado de equipo.</p>
            <div class="options">
                <label><input type="radio" name="q12" value="estilo"> ESTILO DE LIDERAZGO</label>
                <label><input type="radio" name="q12" value="tipo"> TIPO DE LIDERAZGO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">ESTILO DE LIDERAZGO</span></div>
        </div>

        <div class="question">
            <p>13. El líder se centra en valores, promueve en sus colaboradores a seguir un código ético.</p>
            <div class="options">
                <label><input type="radio" name="q13" value="estilo"> ESTILO DE LIDERAZGO</label>
                <label><input type="radio" name="q13" value="tipo"> TIPO DE LIDERAZGO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">ESTILO DE LIDERAZGO</span></div>
        </div>

        <div class="question">
            <p>14. Al mantener una dependencia por sobre protección se dice que se da un _____ paternalista.</p>
            <div class="options">
                <label><input type="radio" name="q14" value="estilo"> ESTILO DE LIDERAZGO</label>
                <label><input type="radio" name="q14" value="tipo"> TIPO DE LIDERAZGO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">ESTILO DE LIDERAZGO</span></div>
        </div>

        <div class="question">
            <p>15. Cuando el liderazgo es legal, por ser elegido por métodos oficiales como elecciones o votaciones, ¿se habla de?</p>
            <div class="options">
                <label><input type="radio" name="q15" value="estilo"> ESTILO DE LIDERAZGO</label>
                <label><input type="radio" name="q15" value="tipo"> TIPO DE LIDERAZGO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">TIPO DE LIDERAZGO</span></div>
        </div>

        <div class="section-title">
            <h2>Sección 3: Verdadero/Falso</h2>
        </div>
        
        <div class="instructions">
            <h3>Instrucciones:</h3>
            <p>Selecciona la opción de FALSO o VERDADERO que consideres adecuada para cada enunciado.</p>
        </div>

        <!-- Preguntas 16-20 -->
        <div class="question">
            <p>16. El estilo facultativo de liderazgo se caracteriza por delegar actividades a todos los miembros del grupo sin importar sus características, ya que se confía en la capacidad de cada miembro en el equipo.</p>
            <div class="options true-false">
                <label><input type="radio" name="q16" value="false"> FALSO</label>
                <label><input type="radio" name="q16" value="true"> VERDADERO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">FALSO</span></div>
        </div>

        <div class="question">
            <p>17. Un líder maquiavélico opera en falta absoluta de principios éticos ya que el fin justifica los medios, no respeta ley en su afán de mantener el poder.</p>
            <div class="options true-false">
                <label><input type="radio" name="q17" value="false"> FALSO</label>
                <label><input type="radio" name="q17" value="true"> VERDADERO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">VERDADERO</span></div>
        </div>

        <div class="question">
            <p>18. El liderazgo se ejerce en distintos ámbitos, como pueden ser la comunidad, la escuela, la familia.</p>
            <div class="options true-false">
                <label><input type="radio" name="q18" value="false"> FALSO</label>
                <label><input type="radio" name="q18" value="true"> VERDADERO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">VERDADERO</span></div>
        </div>

        <div class="question">
            <p>19. El liderazgo influye en otros, ya que implica no solo satisfacer las necesidades primordiales de las personas, sino también preocuparse por necesidades como el afecto y el bien común.</p>
            <div class="options true-false">
                <label><input type="radio" name="q19" value="false"> FALSO</label>
                <label><input type="radio" name="q19" value="true"> VERDADERO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">VERDADERO</span></div>
        </div>

        <div class="question">
            <p>20. El líder es quien identifica tanto sus capacidades, habilidades, cualidades y actitudes, como las de sus colaboradores, con la finalidad de lograr sus tareas personales.</p>
            <div class="options true-false">
                <label><input type="radio" name="q20" value="false"> FALSO</label>
                <label><input type="radio" name="q20" value="true"> VERDADERO</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">FALSO</span></div>
        </div>

        <div class="section-title">
            <h2>Sección 4: Elementos de Liderazgo Humanista</h2>
        </div>
        
        <div class="instructions">
            <h3>Instrucciones:</h3>
            <p>21. Selecciona CUATRO elementos básicos para ejercer un liderazgo con enfoque humanista.</p>
        </div>

        <div class="question">
            <div class="options" style="flex-direction: column;">
                <label><input type="checkbox" name="q21" value="a"> Obtener resultados a toda costa.</label>
                <label><input type="checkbox" name="q21" value="b"> Manejar adecuadamente las relaciones humanas.</label>
                <label><input type="checkbox" name="q21" value="c"> Autoconocimiento.</label>
                <label><input type="checkbox" name="q21" value="d"> Mantener una actitud reservada a la retroalimentación.</label>
                <label><input type="checkbox" name="q21" value="e"> Enfoque en la tarea.</label>
                <label><input type="checkbox" name="q21" value="f"> Reconocer la dignidad de la persona.</label>
                <label><input type="checkbox" name="q21" value="g"> Motivación y visión compartida.</label>
                <label><input type="checkbox" name="q21" value="h"> Conocer alternativas de solución.</label>
            </div>
            <div class="response-info">Respuestas correctas: <span class="correct">Manejar adecuadamente las relaciones humanas, Autoconocimiento, Reconocer la dignidad de la persona, Motivación y visión compartida</span></div>
        </div>

        <div class="section-title">
            <h2>Sección 5: Relacionar Conceptos</h2>
        </div>
        
        <div class="instructions">
            <h3>Instrucciones:</h3>
            <p>Selecciona la opcion correcta.</p>
        </div>

        <div class="question">
            <p><strong>22. Define claramente la visión y el objetivo general.</strong></p>
            <label><input type="radio" name="q22" value="1"> Jefe de proyecto</label><br>
            <label><input type="radio" name="q22" value="2"> Líder</label><br>
            <label><input type="radio" name="q22" value="3"> Dueño de la empresa</label>
            </div>

            <div class="question">
            <p><strong>23. Le es básico conocer la situación real, ya que esto le permite preparar la estrategia de avance a objetivos.</strong></p>
            <label><input type="radio" name="q23" value="1"> Jefe de proyecto</label><br>
            <label><input type="radio" name="q23" value="2"> Líder</label><br>
            <label><input type="radio" name="q23" value="3"> Dueño de la empresa</label>
            </div>

            <div class="question">
            <p><strong>24. Genera un clima de confianza y motivación en el trabajo.</strong></p>
            <label><input type="radio" name="q24" value="1"> Jefe de proyecto</label><br>
            <label><input type="radio" name="q24" value="2"> Líder</label><br>
            <label><input type="radio" name="q24" value="3"> Dueño de la empresa</label>
            </div>

            <div class="question">
            <p><strong>25. Su conducta puede o no ser indiferente ante problemas del personal.</strong></p>
            <label><input type="radio" name="q25" value="1"> Jefe de proyecto</label><br>
            <label><input type="radio" name="q25" value="2"> Líder</label><br>
            <label><input type="radio" name="q25" value="3"> Dueño de la empresa</label>
            </div>

            <div class="question">
            <p><strong>26. Maneja asertivamente las relaciones interpersonales.</strong></p>
            <label><input type="radio" name="q26" value="1"> Jefe de proyecto</label><br>
            <label><input type="radio" name="q26" value="2"> Líder</label><br>
            <label><input type="radio" name="q26" value="3"> Dueño de la empresa</label>
            </div>

            <div class="question">
            <p><strong>27. Es el primer responsable del resultado del proyecto.</strong></p>
            <label><input type="radio" name="q27" value="1"> Jefe de proyecto</label><br>
            <label><input type="radio" name="q27" value="2"> Líder</label><br>
            <label><input type="radio" name="q27" value="3"> Dueño de la empresa</label>
        </div>


        <div class="section-title">
            <h2>Sección 6: Opción Múltiple</h2>
        </div>
        
        <div class="instructions">
            <h3>Instrucciones:</h3>
            <p>Selecciona la opción correcta para completar cada frase.</p>
        </div>

        <!-- Preguntas 25-29 -->
        <div class="question">
            <p>28. Es el liderazgo que promueve los valores, lo cual da un significado a las tareas.</p>
            <div class="options">
                <label><input type="radio" name="q28" value="a"> a) Humanista</label>
                <label><input type="radio" name="q28" value="b"> b) Legal</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">a) Humanista</span></div>
        </div>

        <div class="question">
            <p>29. Un buen líder identifica capacidades, habilidades, cualidades y_____de sus colaboradores.</p>
            <div class="options">
                <label><input type="radio" name="q29" value="a"> a) Actitudes</label>
                <label><input type="radio" name="q29" value="b"> b) Objetivos</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">a) Actitudes</span></div>
        </div>

        <div class="question">
            <p>30. Martin Luther King, se distinguió por su liderazgo.</p>
            <div class="options">
                <label><input type="radio" name="q30" value="a"> a) Paternalista</label>
                <label><input type="radio" name="q30" value="b"> b) Humanista</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">b) Humanista</span></div>
        </div>

        <div class="question">
            <p>31. Adolfo Hitler, se caracterizó por un liderazgo.</p>
            <div class="options">
                <label><input type="radio" name="q31" value="a"> a) Maquiavélico</label>
                <label><input type="radio" name="q31" value="b"> b) Racional</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">a) Maquiavélico</span></div>
        </div>

        <div class="question">
            <p>32. Característica importante de un líder humanista.</p>
            <div class="options">
                <label><input type="radio" name="q32" value="a"> a) Organizar al grupo para cumplir objetivos</label>
                <label><input type="radio" name="q32" value="b"> b) Pertenecer a la familia</label>
            </div>
            <div class="response-info">Respuesta correcta: <span class="correct">a) Organizar al grupo para cumplir objetivos</span></div>
        </div>

        <div class="btn-container">
            <button type="button" id="submit-btn">Calificar Evaluación</button>
        </div>
    </form>

    <div class="results" id="results">
        <h2>Resultados de la Evaluación</h2>
        <div id="score" class="score-display"></div>
        <div id="answers-review"></div>
    </div>

  <script>
document.getElementById('submit-btn').addEventListener('click', function() {
    const correctAnswers = {
        q1: "false", q2: "true", q3: "true", q4: "true", q5: "false",
        q6: "tipo", q7: "estilo", q8: "tipo", q9: "estilo", q10: "estilo",
        q11: "tipo", q12: "estilo", q13: "estilo", q14: "estilo", q15: "tipo",
        q16: "false", q17: "true", q18: "true", q19: "true", q20: "false",
        q21: ["b","c","f","g"],
        q22: "2", q23: "1", q24: "2", q25: "3", q26: "2", q27: "1",
        q28: "a", q29: "a", q30: "b", q31: "a", q32: "a"
    };

    let score = 0;
    const totalQuestions = 32;
    let reviewHTML = "<h3>Revisión detallada de respuestas:</h3><ol>";

    // Función para calificar preguntas de radio
    function gradeRadio(questionNumber, type) {
        const selected = document.querySelector(`input[name="q${questionNumber}"]:checked`);
        if(selected){
            if(selected.value === correctAnswers[`q${questionNumber}`]) {
                score++;
                reviewHTML += `<li class="correct">Pregunta ${questionNumber}: Correcta</li>`;
            } else {
                let correctText = correctAnswers[`q${questionNumber}`];
                if(type==="vf") correctText = correctText==="true"?"VERDADERO":"FALSO";
                reviewHTML += `<li class="incorrect">Pregunta ${questionNumber}: Incorrecta. La respuesta correcta es: ${correctText}</li>`;
            }
        } else {
            let correctText = correctAnswers[`q${questionNumber}`];
            if(type==="vf") correctText = correctText==="true"?"VERDADERO":"FALSO";
            reviewHTML += `<li class="incorrect">Pregunta ${questionNumber}: No respondida. La respuesta correcta es: ${correctText}</li>`;
        }
    }

    // Preguntas Verdadero/Falso: 1-5 y 16-20
    [...Array(5).keys()].map(i=>i+1).concat([...Array(5).keys()].map(i=>i+16)).forEach(q => gradeRadio(q,"vf"));

    // Preguntas Estilo/Tipo: 6-15
    for(let i=6;i<=15;i++){ gradeRadio(i,"tipo"); }

    // Pregunta 21 (checkboxes)
    const selectedCheckboxes = Array.from(document.querySelectorAll('input[name="q21"]:checked')).map(cb => cb.value);
    const correctCheckboxes = correctAnswers.q21;
    let checkboxScore = 0;
    correctCheckboxes.forEach(ans => { if(selectedCheckboxes.includes(ans)) checkboxScore += 0.25; });
    score += checkboxScore;
    reviewHTML += `<li class="${checkboxScore===1?'correct':'incorrect'}">Pregunta 21: ${checkboxScore===1?'Correcta':'Incorrecta'}. Las respuestas correctas son: Manejar adecuadamente las relaciones humanas, Autoconocimiento, Reconocer la dignidad de la persona, Motivación y visión compartida</li>`;

    // Preguntas Relacionar Conceptos: 22-27
    for(let i=22;i<=27;i++){ gradeRadio(i,"rel"); }

    // Preguntas Opción Múltiple: 28-32
    for(let i=28;i<=32;i++){ gradeRadio(i,"om"); }

    reviewHTML += "</ol>";

    const percentage = Math.min(100, ((score / totalQuestions) * 100).toFixed(2));

    document.getElementById('score').textContent = `Puntuación: ${score.toFixed(2)} / ${totalQuestions} (${percentage}%)`;
    document.getElementById('answers-review').innerHTML = reviewHTML;
    document.getElementById('results').style.display = 'block';
    document.getElementById('results').scrollIntoView({behavior:'smooth'});
});
</script>
<script>
        // ==========================
        // SINCRONIZACIÓN
        // ==========================
        
        // ID de la actividad actual (debe coincidir con el ID en la página principal)
        const CURRENT_ACTIVITY_ID = 'activity-4-1';
        
        // Función para marcar la actividad como completada
        function markActivityCompleted() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            // Obtener el progreso actual del usuario
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            let progressData = savedProgress ? JSON.parse(savedProgress) : {};
            
            // Marcar esta actividad como completada
            progressData[CURRENT_ACTIVITY_ID] = true;
            
            // Guardar en localStorage
            localStorage.setItem(progressKey, JSON.stringify(progressData));
            
            // Disparar evento para sincronizar otras pestañas
            window.dispatchEvent(new Event('storage'));
            
            // Mostrar indicador de progreso
            document.getElementById('progress-indicator').classList.add('visible');
            
            return true;
        }
        
        // Función para verificar si la actividad ya está completada
        function checkActivityStatus() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            
            if (savedProgress) {
                const progressData = JSON.parse(savedProgress);
                if (progressData[CURRENT_ACTIVITY_ID]) {
                    document.getElementById('progress-indicator').classList.add('visible');
                    return true;
                }
            }
            
            return false;
        }
        
        // Función para navegar al siguiente tema
        function goNext() {
            console.log('Función goNext() ejecutada');
            
            // Primero marcar como completado si no lo está
            if (!checkActivityStatus()) {
                markActivityCompleted();
            }
            
            // Navegar al Tema 2
            window.location.href = 'sopa.html';
        }
        
        // Función para volver al curso
        function goBack() {
            window.location.href = '../../index.html';
        }
        
        // Cuando la página carga, verificar el estado de la actividad
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Página cargada');
            
            // Verificar si hay un usuario logueado
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser) {
                console.log('Usuario encontrado:', currentUser.fullname);
                
                // Si la actividad no está marcada como completada, marcarla
                if (!checkActivityStatus()) {
                    markActivityCompleted();
                }
                
                // Agregar event listener al botón de siguiente
                document.getElementById('next-button').addEventListener('click', goNext);
                
            } else {
                console.log('No hay usuario logueado');
                
                // Si no hay usuario, ocultar los botones de navegación
                document.querySelector('.page-navigation').style.display = 'none';
                alert('Por favor, inicia sesión en el curso primero.');
            }
        });
        
        // Escuchar eventos de storage para actualizaciones desde otras pestañas
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('progress_')) {
                checkActivityStatus();
            }
        });
    </script>
</body>
</html>