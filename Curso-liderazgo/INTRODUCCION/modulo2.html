<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MODULO II</title>
    <link rel="stylesheet" href="m2.css">
    <style>
        /* Estilos para la navegación */
        .page-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding: 20px 0;
            border-top: 1px solid #ddd;
        }
        
        .nav-btn {
            background-color: #2980b9;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover {
            background-color: #2c3e50;
        }
        
        .nav-btn.prev {
            background-color: #7f8c8d;
        }
        
        .nav-btn.prev:hover {
            background-color: #34495e;
        }
        
        /* Estilos para el iframe */
        .esquema iframe {
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        /* Indicador de progreso */
        .progress-indicator {
            text-align: center;
            padding: 10px;
            background-color: #e8f4f8;
            border-radius: 5px;
            margin: 20px 0;
            display: none;
        }
        
        .progress-indicator.visible {
            display: block;
        }
    </style>
</head>
<body>
    <div class="contenedor0">
        <h1>Módulo II Significado del liderazgo</h1>
        <h2>Introducción</h2>
    </div>

    <div class="progress-indicator" id="progress-indicator">
        <p>✅ Esta actividad ha sido marcada como completada en tu progreso</p>
    </div>

    <div class="contenedor">
        <h3>“El líder centrado en principios, ve la vida como una misión. Las fuerzas que lo alimentan, lo han 
            preparado para el servicio.”</h3>  
        <h3>Stephen R. Covey</h3>
    </div>

    <div class="conte0">
        <p>En este módulo reflexionarás sobre tu historia personal, la manera como te relacionas con las personas,
            la necesidad de trascender en el trabajo, así como aspectos fundamentales que facilitan el desarrollo 
            del liderazgo con enfoque humanista.</p>

        <p>Se analizarán algunas de las preguntas que el ser humano se plantea a lo largo de su vida tales como: 
            ¿quién soy?, ¿cómo puedo descubrir mis cualidades y valores?, y ¿cuál es el sentido de mi trabajo? 
            La respuesta te ayudará a comprender mejor a tus compañeros y colaboradores.</p>
    </div>

    <div class="objetivos">
        <h4>Objetivo particular</h4>
        <p>Establecer la importancia del autoconocimiento del líder a través de la imagen, conciencia, motivación y
            valores humanos para coadyuvar al desarrollo de capacidades y habilidades en los demás.</p>
    </div>

    <div class="temario">
        <h4>Temario</h4>
        <p>Estudiaremos los siguientes temas, para entender el liderazgo con enfoque humanista como parte de tu vida:<br><br>
            • Persona / El ser humano.<br>
            • ¿Quién soy?<br>
            • Descubrimiento personal en el trabajo.</p>
    </div>

    <div class="esquema">
        <h4>Esquema conceptual</h4>
        <iframe src="esquemaM2.html" width="100%" height="1030" frameborder="0"></iframe>
    </div>

    <div class="page-navigation">
        <button class="nav-btn prev" onclick="goBack()">
            <i class="fas fa-arrow-left"></i> Volver al Curso
        </button>
        
        <button class="nav-btn next" onclick="goNext()">
            Siguiente Tema <i class="fas fa-arrow-right"></i>
        </button>
    </div>

    <!-- Font Awesome para iconos -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <script>
        // ==========================
        // SISTEMA DE SINCRONIZACIÓN
        // ==========================
        
        // ID de la actividad actual (debe coincidir con el ID en la página principal)
        const CURRENT_ACTIVITY_ID = 'activity-2-0';
        
        // Función para marcar la actividad como completada
        function markActivityCompleted() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            // Obtener el progreso actual del usuario
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            let progressData = savedProgress ? JSON.parse(savedProgress) : {};
            
            // Marcar esta actividad como completada
            progressData[CURRENT_ACTIVITY_ID] = true;
            
            // Guardar en localStorage
            localStorage.setItem(progressKey, JSON.stringify(progressData));
            
            // Disparar evento para sincronizar otras pestañas
            window.dispatchEvent(new Event('storage'));
            
            // Mostrar indicador de progreso
            document.getElementById('progress-indicator').classList.add('visible');
            
            return true;
        }
        
        // Función para verificar si la actividad ya está completada
        function checkActivityStatus() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            
            if (savedProgress) {
                const progressData = JSON.parse(savedProgress);
                if (progressData[CURRENT_ACTIVITY_ID]) {
                    document.getElementById('progress-indicator').classList.add('visible');
                    return true;
                }
            }
            
            return false;
        }
        
        // Función para navegar al siguiente tema
        function goNext() {
            // Primero marcar como completado si no lo está
            if (!checkActivityStatus()) {
                markActivityCompleted();
            }
            
            // Navegar al Tema 1
            window.location.href = '../MODULO2/1/Tema1.html';
        }
        
        // Función para volver al curso
        function goBack() {
            window.location.href = '../index.html'; // Ajusta según tu estructura
        }
        
        // Cuando la página carga, verificar el estado de la actividad
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar si hay un usuario logueado
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser) {
                // Si la actividad no está marcada como completada, marcarla
                if (!checkActivityStatus()) {
                    markActivityCompleted();
                }
            } else {
                // Si no hay usuario, ocultar los botones de navegación
                document.querySelector('.page-navigation').style.display = 'none';
                alert('Por favor, inicia sesión en el curso primero.');
            }
        });
        
        // Escuchar eventos de storage para actualizaciones desde otras pestañas
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('progress_')) {
                checkActivityStatus();
            }
        });
    </script>
</body>
</html>

<!--<div class="Sopa">
    <iframe src="SOPA.HTML" width="70%" height="870px" frameborder="0" scrolling="no"></iframe>
</div>-->