<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MODULO III</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Estilos para la navegación */
        .page-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding: 20px 0;
            border-top: 1px solid #ddd;
        }
        
        .nav-btn {
            background-color: #2980b9;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover {
            background-color: #2c3e50;
        }
        
        .nav-btn.prev {
            background-color: #7f8c8d;
        }
        
        .nav-btn.prev:hover {
            background-color: #34495e;
        }
        
        /* Estilos para el iframe */
        .esquema iframe {
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        /* Indicador de progreso */
        .progress-indicator {
            text-align: center;
            padding: 10px;
            background-color: #e8f4f8;
            border-radius: 5px;
            margin: 20px 0;
            display: none;
        }
        
        .progress-indicator.visible {
            display: block;
        }
    </style>
</head>
<body>
    <div class="contenedor0">
        <h1>Módulo III Liderazgo en acción</h1><br>
        <h1>Conclusión</h1>
    </div>

    <div class="progress-indicator" id="progress-indicator">
        <p>✅ Esta actividad ha sido marcada como completada en tu progreso</p>
    </div>

    <div class="conte0">
        <p>Los principales beneficios que se derivan del ejercicio de un liderazgo con enfoque humanista en 
            la organización, radican en: <br><br>
            <div class="tarjeta-contenedor">

                <!-- Tarjeta Revalorar la dignidad de las personas. -->
                <div class="tarjeta">
                    <h3>Revalorar la dignidad de las personas.</h3>
                    <button class="expand-btn" onclick="this.nextElementSibling.classList.toggle('detalle'); this.textContent=this.textContent=='Mostrar más'?'Mostrar menos':'Mostrar más'">Mostrar más</button>
                    <div class="detalle">
                        <p>El respeto y reconocimiento de las fortalezas de cada una de las personas que colaboran en la 
                            organización, permite sostener relaciones dignas, generando confianza y compromiso en cada uno de 
                            los colaboradores. </p>
                    </div>
                </div>

                <!-- Tarjeta Hacer explícitos los requerimientos. -->
                <div class="tarjeta">
                    <h3>Hacer explícitos los requerimientos.</h3>
                    <button class="expand-btn" onclick="this.nextElementSibling.classList.toggle('detalle'); this.textContent=this.textContent=='Mostrar más'?'Mostrar menos':'Mostrar más'">Mostrar más</button>
                    <div class="detalle">
                        <p> Las personas saben lo que se espera que hagan, y qué es lo que pasará si no lo hacen. Tienen claro 
                            su papel, los objetivos y, los estándares de desempeño y de conducta requeridos. <br><br>
                    </div>
                </div>

                <!-- Tarjeta Desarrollar el sentido de compromiso. -->
                <div class="tarjeta">
                    <h3>Desarrollar el sentido de compromiso.</h3>
                    <button class="expand-btn" onclick="this.nextElementSibling.classList.toggle('detalle'); this.textContent=this.textContent=='Mostrar más'?'Mostrar menos':'Mostrar más'">Mostrar más</button>
                    <div class="detalle">
                        <p>Se incrementa el compromiso y la identificación de los colaboradores con la organización. 
                            Su propósito debe ser integrar hasta donde sea posible, las necesidades de la organización 
                            con las de la persona, de tal modo que sienta que si la organización prospera con su ayuda, 
                            ella también prosperará. </p>
                    </div>
                </div>

                <!-- Tarjeta Valorar el trabajo. -->
                <div class="tarjeta">
                    <h3>Valorar el trabajo.</h3>
                    <button class="expand-btn" onclick="this.nextElementSibling.classList.toggle('detalle'); this.textContent=this.textContent=='Mostrar más'?'Mostrar menos':'Mostrar más'">Mostrar más</button>
                    <div class="detalle">
                        <p> Las retribuciones por el trabajo proporcionan satisfacción, al permitir a la persona experimentar 
                            la realización, la expresión y uso de sus capacidades, así como la toma de decisiones.</p>
                    </div>
                </div>

                 <!-- Tarjeta Retribuir y reconocer el logro. -->
                <div class="tarjeta">
                    <h3>Retribuir y reconocer el logro.</h3>
                    <button class="expand-btn" onclick="this.nextElementSibling.classList.toggle('detalle'); this.textContent=this.textContent=='Mostrar más'?'Mostrar menos':'Mostrar más'">Mostrar más</button>
                    <div class="detalle">
                        <p> Un sistema salarial puede remunerar adecuadamente el logro; sin embargo, también hay que 
                            retribuir el esfuerzo de las personas, dándoles mayor responsabilidad y oportunidades de 
                            ascenso, como una oportunidad para su crecimiento como ser humano.
                    </div>
                </div>
            </div>
    </div>

    <div class="contenedor">
        <h3>El líder con enfoque en la Nueva Cultura Laboral, está dispuesto a romper paradigmas y comprometerse 
            a humanizar el mundo del trabajo.</h3>
    </div>


    <div class="page-navigation">
        <button class="nav-btn prev" onclick="goBack()">
            ← Volver al Curso
        </button>
        
        <button class="nav-btn next" id="next-button">
            Siguiente Tema →
        </button>
    </div>

    <!-- Font Awesome para iconos -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <script>
        // ==========================
        // SINCRONIZACIÓN
        // ==========================
        
        // ID de la actividad actual (debe coincidir con el ID en la página principal)
        const CURRENT_ACTIVITY_ID = 'conclusion3';
        
        // Función para marcar la actividad como completada
        function markActivityCompleted() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            // Obtener el progreso actual del usuario
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            let progressData = savedProgress ? JSON.parse(savedProgress) : {};
            
            // Marcar esta actividad como completada
            progressData[CURRENT_ACTIVITY_ID] = true;
            
            // Guardar en localStorage
            localStorage.setItem(progressKey, JSON.stringify(progressData));
            
            // Disparar evento para sincronizar otras pestañas
            window.dispatchEvent(new Event('storage'));
            
            // Mostrar indicador de progreso
            document.getElementById('progress-indicator').classList.add('visible');
            
            return true;
        }
        
        // Función para verificar si la actividad ya está completada
        function checkActivityStatus() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            
            if (savedProgress) {
                const progressData = JSON.parse(savedProgress);
                if (progressData[CURRENT_ACTIVITY_ID]) {
                    document.getElementById('progress-indicator').classList.add('visible');
                    return true;
                }
            }
            
            return false;
        }
        
        // Función para navegar al siguiente tema
        function goNext() {
            console.log('Función goNext() ejecutada');
            
            // Primero marcar como completado si no lo está
            if (!checkActivityStatus()) {
                markActivityCompleted();
            }
            
            // Navegar a la introduccion del MODULO 2
            window.location.href = '../EXAMEN/Examen-Final.html';
        }
        
        // Función para volver al curso
        function goBack() {
            window.location.href = '../../index.html';
        }
        
        // Cuando la página carga, verificar el estado de la actividad
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Página cargada');
            
            // Verificar si hay un usuario logueado
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser) {
                console.log('Usuario encontrado:', currentUser.fullname);
                
                // Si la actividad no está marcada como completada, marcarla
                if (!checkActivityStatus()) {
                    markActivityCompleted();
                }
                
                // Agregar event listener al botón de siguiente
                document.getElementById('next-button').addEventListener('click', goNext);
                
            } else {
                console.log('No hay usuario logueado');
                
                // Si no hay usuario, ocultar los botones de navegación
                document.querySelector('.page-navigation').style.display = 'none';
                alert('Por favor, inicia sesión en el curso primero.');
            }
        });
        
        // Escuchar eventos de storage para actualizaciones desde otras pestañas
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('progress_')) {
                checkActivityStatus();
            }
        });
    </script>
</body>
</html>