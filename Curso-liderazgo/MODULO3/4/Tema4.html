<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MODULO III</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Estilos para la navegación */
        .page-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding: 20px 0;
            border-top: 1px solid #ddd;
        }
        
        .nav-btn {
            background-color: #2980b9;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover {
            background-color: #2c3e50;
        }
        
        .nav-btn.prev {
            background-color: #7f8c8d;
        }
        
        .nav-btn.prev:hover {
            background-color: #34495e;
        }
        
        /* Estilos para el iframe */
        .esquema iframe {
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        /* Indicador de progreso */
        .progress-indicator {
            text-align: center;
            padding: 10px;
            background-color: #e8f4f8;
            border-radius: 5px;
            margin: 20px 0;
            display: none;
        }
        
        .progress-indicator.visible {
            display: block;
        }
    </style>
</head>
<body>
    <div class="contenedor0">
        <h1>TEMA 4. Importancia del liderazgo humanista en la Nueva Cultura Laboral</h1>
    </div>

    <div class="progress-indicator" id="progress-indicator">
        <p>✅ Esta actividad ha sido marcada como completada en tu progreso</p>
    </div>

    <div class="conte0">
        <p>De acuerdo a los criterios de la Nueva Cultura Laboral, la persona cumple un papel 
            fundamental dentro de la organización. A continuación, se presentan los elementos que te 
            permitirán llevar a cabo tu liderazgo con un enfoque humanista</p>

            <div class="tarjeta-contenedor">

                <!-- Tarjeta Líder humanista -->
                <div class="tarjeta">
                    <h3>Criterio: Líder humanista</h3>
                    <button class="expand-btn" onclick="this.nextElementSibling.classList.toggle('detalle'); this.textContent=this.textContent=='Mostrar más'?'Mostrar menos':'Mostrar más'">Mostrar más</button>
                    <div class="detalle">
                        <p><strong>Estrategia:</strong> Conoce a tu gente. Busca oportunidades y desafíos para orientar un cambio, que permita el crecimiento y la innovación en los colaboradores.</p>
                        <p><strong>Metodología:</strong> Identifica los talentos y recursos de la organización. Cuestiona ¿qué harías diferente? Invita a tus colaboradores a resolver problemas asertivamente, delega actividades y pon a prueba su creatividad. Analiza tu rutina diaria, descubre una actividad por mejorar.</p>
                        <p><strong>Recomendación:</strong> Si consideras que no estás creciendo como persona, probablemente no estás dando lo mejor de ti.</p>
                    </div>
                </div>

                <!-- Tarjeta Trabajo -->
                <div class="tarjeta">
                    <h3>Criterio: Trabajo</h3>
                    <button class="expand-btn" onclick="this.nextElementSibling.classList.toggle('detalle'); this.textContent=this.textContent=='Mostrar más'?'Mostrar menos':'Mostrar más'">Mostrar más</button>
                    <div class="detalle">
                        <p><strong>Estrategia:</strong> El trabajo ofrece oportunidades de desarrollo personal. Permite el perfeccionamiento y genera una autorealización. Experimenta, asume riesgos y aprende de los errores.</p>
                        <p><strong>Metodología:</strong> Implementa procesos para identificar ideas innovadoras (lluvia de ideas, entrevistas, etc). Relaciónate con personas de la misma organización, que son innovadoras. Actualiza a tus colaboradores, fomenta que asistan a conferencias, cursos, seminarios, etc. Analiza fallas y éxitos, cuestiona lo que hicieron bien o mal y qué aprendieron. Toma riesgos analizando pros y contras. Proporciona oportunidades para fomentar compromiso y reto.</p>
                        <p><strong>Recomendación:</strong> Ocúpate en descubrir el lado humano del trabajo.</p>
                    </div>
                </div>

                <!-- Tarjeta Organización -->
                <div class="tarjeta">
                    <h3>Criterio: Organización</h3>
                    <button class="expand-btn" onclick="this.nextElementSibling.classList.toggle('detalle'); this.textContent=this.textContent=='Mostrar más'?'Mostrar menos':'Mostrar más'">Mostrar más</button>
                    <div class="detalle">
                        <p><strong>Estrategia:</strong> Misión, visión, objetivos y valores de la organización.</p>
                        <p><strong>Metodología:</strong> Ten presente en la elaboración de un discurso la visión, misión, objetivos y valores de la organización. Mantén informada a tu gente. Establece rutinas y sistemas que fomenten disciplina. Entusiásmate por tu trabajo. Fomenta el cumplimiento de objetivos organizacionales.</p>
                        <p><strong>Recomendación:</strong> Esfuérzate por hacer de tu organización una comunidad de desarrollo, donde hombres y mujeres puedan desarrollar todo su potencial.</p>
                    </div>
                </div>

                <!-- Tarjeta Productividad -->
                <div class="tarjeta">
                    <h3>Criterio: Productividad</h3>
                    <button class="expand-btn" onclick="this.nextElementSibling.classList.toggle('detalle'); this.textContent=this.textContent=='Mostrar más'?'Mostrar menos':'Mostrar más'">Mostrar más</button>
                    <div class="detalle">
                        <p><strong>Estrategia:</strong> La riqueza de los trabajadores es la que genera la productividad. Hacer la diferencia en la organización, en la familia y en la comunidad.</p>
                        <p><strong>Metodología:</strong> Considera el valor de la persona en la organización. Respeta su dignidad. Proporciona elementos para el desempeño de su trabajo. Motiva el desempeño de los colaboradores. Reconoce su esfuerzo.</p>
                        <p><strong>Recomendación:</strong> Rompe paradigmas interesándote no por el producto, sino por la persona que lo realiza. Concientiza a los colaboradores sobre la interacción entre valor de la persona, trabajo, organización y productividad.</p>
                    </div>
                </div>

        </div>
    </div>

    <div class="page-navigation">
        <button class="nav-btn prev" onclick="goBack()">
            ← Volver al Curso
        </button>
        
        <button class="nav-btn next" id="next-button">
            Siguiente Tema →
        </button>
    </div>

    <!-- Font Awesome para iconos -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <script>
        // ==========================
        // SINCRONIZACIÓN
        // ==========================
        
        // ID de la actividad actual (debe coincidir con el ID en la página principal)
        const CURRENT_ACTIVITY_ID = 'activity-3-4';
        
        // Función para marcar la actividad como completada
        function markActivityCompleted() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            // Obtener el progreso actual del usuario
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            let progressData = savedProgress ? JSON.parse(savedProgress) : {};
            
            // Marcar esta actividad como completada
            progressData[CURRENT_ACTIVITY_ID] = true;
            
            // Guardar en localStorage
            localStorage.setItem(progressKey, JSON.stringify(progressData));
            
            // Disparar evento para sincronizar otras pestañas
            window.dispatchEvent(new Event('storage'));
            
            // Mostrar indicador de progreso
            document.getElementById('progress-indicator').classList.add('visible');
            
            return true;
        }
        
        // Función para verificar si la actividad ya está completada
        function checkActivityStatus() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            
            if (savedProgress) {
                const progressData = JSON.parse(savedProgress);
                if (progressData[CURRENT_ACTIVITY_ID]) {
                    document.getElementById('progress-indicator').classList.add('visible');
                    return true;
                }
            }
            
            return false;
        }
        
        // Función para navegar al siguiente tema
        function goNext() {
            console.log('Función goNext() ejecutada');
            
            // Primero marcar como completado si no lo está
            if (!checkActivityStatus()) {
                markActivityCompleted();
            }
            
            // Navegar al Tema 3
            window.location.href = '../conclusion.html';
        }
        
        // Función para volver al curso
        function goBack() {
            window.location.href = '../../index.html';
        }
        
        // Cuando la página carga, verificar el estado de la actividad
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Página cargada');
            
            // Verificar si hay un usuario logueado
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser) {
                console.log('Usuario encontrado:', currentUser.fullname);
                
                // Si la actividad no está marcada como completada, marcarla
                if (!checkActivityStatus()) {
                    markActivityCompleted();
                }
                
                // Agregar event listener al botón de siguiente
                document.getElementById('next-button').addEventListener('click', goNext);
                
            } else {
                console.log('No hay usuario logueado');
                
                // Si no hay usuario, ocultar los botones de navegación
                document.querySelector('.page-navigation').style.display = 'none';
                alert('Por favor, inicia sesión en el curso primero.');
            }
        });
        
        // Escuchar eventos de storage para actualizaciones desde otras pestañas
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('progress_')) {
                checkActivityStatus();
            }
        });
    </script>
</body>
</html>