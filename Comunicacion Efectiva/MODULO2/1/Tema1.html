<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MODULO II</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    line-height: 1.6; 
    color: #333; 
    background-color: #f5f5f5; 
    padding: 20px; 
    max-width: 1200px; 
    margin: 0 auto; 
}
.Titulo { 
    text-align: center; 
    padding: 30px 20px; 
    margin-bottom: 20px; 
    background: linear-gradient(135deg, #2c3e50 0%, #4a6580 100%); 
    color: white; 
    border-radius: 8px; 
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.Titulo h1 { 
    font-size: clamp(1.8rem, 4vw, 2.5rem); 
    margin-bottom: 15px; 
    font-weight: 600;
}
.Titulo h2 { 
    font-size: clamp(1.2rem, 2.5vw, 1.5rem); 
    font-weight: 400; 
    opacity: 0.9;
}
.citaT-Autor { 
    background-color: #fff; 
    padding: 25px; 
    margin: 20px 0; 
    border-left: 5px solid #3498db; 
    border-radius: 4px; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
    font-style: italic; 
    color: #555;
}
.citaT-Autor h3:first-child { 
    font-size: clamp(1.2rem, 3vw, 1.4rem); 
    margin-bottom: 15px; 
    line-height: 1.5; 
    color: #2c3e50;
}
.citaT-Autor h3:last-child { 
    text-align: right; 
    font-size: clamp(1.1rem, 2.5vw, 1.3rem); 
    color: #000; 
    font-style: normal; 
    margin-top: 10px;
}
.Parrafo { 
    background-color: white; 
    padding: 25px; 
    border-radius: 8px; 
    margin: 20px 0; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.Parrafo h2 { 
    font-size: clamp(1.3rem, 3vw, 1.6rem); 
    margin-bottom: 15px; 
    color: #2c3e50;
}
.Parrafo p { 
    text-align: justify; 
    margin-bottom: 20px; 
    font-size: clamp(1.1rem, 2.5vw, 1.4rem); 
    line-height: 1.7;
}
.Parrafo img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 15px auto;
    display: block;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.Referencia { 
    background-color: #fff; 
    text-align: justify; 
    padding: 25px; 
    margin: 20px 0; 
    border-left: 5px solid #3498db; 
    border-radius: 4px; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
    font-style: italic; 
    color: #000;
}
.Referencia h3 { 
    text-align: justify; 
    font-weight: bold;
    font-size: clamp(1.1rem, 2.5vw, 1.3rem);
}
.Tema { 
    background-color: white; 
    padding: 25px; 
    border-radius: 8px; 
    margin: 20px 0; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
    border-top: 4px solid #ff771c;
}
.Tema h4 { 
    font-size: clamp(1.2rem, 3vw, 1.4rem); 
    color: #ff771c; 
    margin-bottom: 10px;
}
.Tema p { 
    display: block; 
    margin-top: 15px; 
    font-size: clamp(1.1rem, 2.5vw, 1.4rem); 
    line-height: 1.6;
}
.Tema img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 15px auto;
    display: block;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.container-tarjet { 
    margin-top: 20px; 
    display: flex; 
    flex-wrap: wrap; 
    gap: 15px;
}
.tarjetas { 
    background-color: white; 
    border-radius: 12px; 
    box-shadow: 0 3px 10px rgba(0,0,0,0.1); 
    overflow: hidden; 
    transition: all 0.3s ease; 
    cursor: pointer; 
    border: 2px solid transparent; 
    margin-bottom: 15px; 
    flex: 1 1 300px; 
    max-width: 100%;
}
.tarjetas:hover { 
    transform: translateY(-3px); 
    box-shadow: 0 5px 15px rgba(0,0,0,0.15); 
    border-color: #2c3e50;
}
.header-tarjet { 
    background-color: #5493d1; 
    color: white; 
    padding: 15px; 
    display: flex; 
    justify-content: space-between; 
    align-items: center;
}
.header-tarjet h3 {
    font-size: clamp(1rem, 2.5vw, 1.2rem);
    margin: 0;
}
.modal-overlay { 
    display: none; 
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    background: rgba(0,0,0,0.7); 
    z-index: 1000; 
    align-items: center; 
    justify-content: center;
}
.modal-overlay.activo { 
    display: flex;
}
.modal-teoria { 
    background-color: white; 
    border-radius: 12px; 
    box-shadow: 0 10px 30px rgba(0,0,0,0.3); 
    max-width: 90%; 
    width: 900px;
    max-height: 85vh; 
    overflow-y: auto; 
    position: relative; 
    animation: modalAppear 0.3s ease-out;
}
.modal-teoria-header { 
    background-color: #6695c4; 
    color: white; 
    padding: 20px; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    border-radius: 12px 12px 0 0;
}
.modal-teoria-contenido { 
    padding: 25px; 
    font-size: clamp(14px, 2vw, 19px); 
    line-height: 1.7;
}
.modal-teoria-contenido img {
    max-width: 70%;
    height: auto;
    border-radius: 8px;
    margin: 10px auto;
    display: block;
}
.flecha-externa { 
    position: absolute; 
    top: 50%; 
    transform: translateY(-50%); 
    background: rgba(255,255,255,0.8); 
    border: none; 
    border-radius: 50%; 
    width: 50px; 
    height: 50px; 
    font-size: 18px; 
    cursor: pointer; 
    z-index: 1001; 
    transition: all 0.3s ease;
}
.flecha-externa:hover { 
    background: white; 
    transform: translateY(-50%) scale(1.1);
}
.flecha-izquierda { left: 80px; }
.flecha-derecha { right: 80px; }
.cerrar-btn { 
    position: absolute; 
    top: 15px; 
    right: 15px; 
    background: none; 
    border: none; 
    font-size: 24px; 
    cursor: pointer; 
    color: white;
}

/* Indicador de progreso */
        .progress-indicator {
            text-align: center;
            padding: 10px;
            background-color: #e8f4f8;
            border-radius: 5px;
            margin: 20px 0;
            display: none;
        }
/* Estilos para la navegación */
        .page-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding: 20px 0;
            border-top: 1px solid #ddd;
        }
        
        .nav-btn {
            background-color: #2980b9;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover {
            background-color: #2c3e50;
        }
        
        .nav-btn.prev {
            background-color: #7f8c8d;
        }
        
        .nav-btn.prev:hover {
            background-color: #34495e;
        }

@keyframes modalAppear { 
    from { opacity: 0; transform: scale(0.8);} 
    to { opacity: 1; transform: scale(1);}
}

/* Responsive */
@media (max-width: 768px) {
    body { padding: 10px; }
    .Titulo, .citaT-Autor, .Parrafo, .Referencia, .Tema { 
        padding: 20px 15px; 
        margin: 15px 0;
    }
    .container-tarjet { 
        gap: 10px;
    }
    .tarjetas { 
        flex: 1 1 100%;
    }
    .modal-teoria { 
        max-width: 95%; 
        margin: 10px;
    }
    .flecha-externa {
        width: 35px;
        height: 35px;
        font-size: 16px;
    }
    .Parrafo img,
    .Tema img {
        max-width: 85%;
    }
}

@media (max-width: 480px) {
    body { padding: 5px; }
    .Titulo, .citaT-Autor, .Parrafo, .Referencia, .Tema { 
        padding: 15px 10px; 
        margin: 10px 0;
    }
    .modal-teoria-header,
    .modal-teoria-contenido {
        padding: 15px;
    }
    .Parrafo img,
    .Tema img {
        max-width: 90%;
    }
}
</style>
</head>
<body>
<div class="Titulo"><h1>Tema 1. Tipos de Comunicación.</h1></div>
<div class="progress-indicator" id="progress-indicator">
        <p>✅ Esta actividad ha sido marcada como completada en tu progreso</p>
    </div>

    <div class="Tema" style="border-top-color: #ff771c">
        <h4 style="color: #ff771c">VERBAL.</h4>
        <p>Se utiliza para trasmitir ideas, pensamientos o sentimientos a través del habla. <br><br>
En esta forma de comunicación tiene especial importancia la retroalimentación, que es la etapa mediante la cual se conoce el efecto que provoca en el oyente un mensaje si lo comprende o asimila.<br><br>
Se lleva a cabo mediante tres pasos:<br><br>
• SELECCIONAR<br>
• ORGANIZAR<br>
• INTERPRETAR</p><div class="container-tarjet"></div></div>
<div class="Parrafo"><h2></h2><p>Etapa mediante la cual se conoce el efecto que provoca en el oyente un mensaje, si lo comprende o asimila, por ello la diferencia con lo escrito es que es más ágil, los mensajes pueden darse de forma más rápida y como se apoya en un contacto.</p></div>

    <div class="Tema" style="border-top-color: #80ff00">
        <h4 style="color: #80ff00">NO VERBAL.</h4>
        <p>Se refiere a ese intercambio de pareceres y sentimientos que no se expresan con palabras sino con señales de voz, sin articulación, con gestos corporales o expresiones faciales y por medio de estructuras e imágenes espaciales, culturales y artísticas.<br><br>
Esta compuesta por:</p><p style="color: grey;">Haz clic en los botones azules.</p><div class="container-tarjet"><div class="tarjetas" onclick="abrirTeoria(1, 0)"><div class="header-tarjet"><h3>Paralingüística.</h3></div></div><div class="tarjetas" onclick="abrirTeoria(1, 1)"><div class="header-tarjet"><h3>Kinésica.</h3></div></div><div class="tarjetas" onclick="abrirTeoria(1, 2)"><div class="header-tarjet"><h3>Proxémica.</h3></div></div></div></div>

    <div class="Tema" style="border-top-color: #80ff00">
        <h4 style="color: #80ff00"></h4>
        <p>35 Gestos faciales que significan lo mismo en todas las culturas.</p><p style="color: grey;">Haz clic en los botones azules.</p><div class="container-tarjet"><div class="tarjetas" onclick="abrirTeoria(2, 0)"><div class="header-tarjet"><h3>1</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 1)"><div class="header-tarjet"><h3>2</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 2)"><div class="header-tarjet"><h3>3</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 3)"><div class="header-tarjet"><h3>4</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 4)"><div class="header-tarjet"><h3>5</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 5)"><div class="header-tarjet"><h3>6</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 6)"><div class="header-tarjet"><h3>7</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 7)"><div class="header-tarjet"><h3>8</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 8)"><div class="header-tarjet"><h3>9</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 9)"><div class="header-tarjet"><h3>10</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 10)"><div class="header-tarjet"><h3>11</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 11)"><div class="header-tarjet"><h3>12</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 12)"><div class="header-tarjet"><h3>13</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 13)"><div class="header-tarjet"><h3>14</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 14)"><div class="header-tarjet"><h3>15</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 15)"><div class="header-tarjet"><h3>16</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 16)"><div class="header-tarjet"><h3>17</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 17)"><div class="header-tarjet"><h3>18</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 18)"><div class="header-tarjet"><h3>19</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 19)"><div class="header-tarjet"><h3>20</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 20)"><div class="header-tarjet"><h3>21</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 21)"><div class="header-tarjet"><h3>22</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 22)"><div class="header-tarjet"><h3>23</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 23)"><div class="header-tarjet"><h3>24</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 24)"><div class="header-tarjet"><h3>25</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 25)"><div class="header-tarjet"><h3>26</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 26)"><div class="header-tarjet"><h3>27</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 27)"><div class="header-tarjet"><h3>28</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 28)"><div class="header-tarjet"><h3>29</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 29)"><div class="header-tarjet"><h3>30</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 30)"><div class="header-tarjet"><h3>31</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 31)"><div class="header-tarjet"><h3>32</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 32)"><div class="header-tarjet"><h3>33</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 33)"><div class="header-tarjet"><h3>34</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 34)"><div class="header-tarjet"><h3>35</h3></div></div></div></div>

    <div class="Tema" style="border-top-color: #0000ff">
        <h4 style="color: #0000ff">ESCRITA.</h4>
        <p>Es aquella que se realiza por medio de la escritura, el mensaje constituye el elemento esencial y es redactado para trasmitir ideas al receptor.<br><br>
La composición escrita: <strong>“Es un proceso cognitivo complejo que consiste en traducir el lenguaje representado (ideas, pensamientos, sentimientos, impresiones de tipo episódico que posee el sujeto) en discurso escrito coherente, en función de contextos comunicativos y sociales determinados.”</strong></p><div class="container-tarjet"></div></div>

<div class="modal-overlay" id="modal-teoria">
    <button class="flecha-externa flecha-izquierda" id="flecha-izq-teoria" onclick="navegarTeoria(-1)">←</button>
    <div class="modal-teoria">
        <div class="modal-teoria-header">
            <h3 id="modal-teoria-titulo">Título Teoría</h3>
        </div>
        <div class="modal-teoria-contenido" id="modal-teoria-contenido">
            <!-- Contenido se insertará dinámicamente -->
        </div>
        <button class="cerrar-btn" onclick="cerrarTeoriaModal()">X</button>
    </div>
    <button class="flecha-externa flecha-derecha" id="flecha-der-teoria" onclick="navegarTeoria(1)">→</button>
</div>

<div class="page-navigation">
        <button class="nav-btn prev" onclick="goBack()">
            ← Volver al Curso
        </button>
        
        <button class="nav-btn next" id="next-button">
            Siguiente Tema →
        </button>
    </div>

<script>
// MODIFICADO: Sistema de tarjetas por tema
let temaActual = null;
let tarjetaActual = 0;
const temasData = {"0": {"tarjetas": []}, "1": {"tarjetas": [{"titulo": "Paraling\u00fc\u00edstica.", "contenido": "\u2022 Grupo de voz sin palabras.<br><br>\u2022 Son signos que se emiten consciente o inconscientemente y que tienen un gran rendimiento funcional; por ejemplo, en la risa, esta puede manifestar alegr\u00eda y miedo, indicar acuerdo o seguimiento al interlocutor."}, {"titulo": "Kin\u00e9sica.", "contenido": "Conjunto de gestos, posturas y movimientos corporales que forman parte del lenguaje no verbal.<br><br>Sin embargo, solo 35 gestos faciales significan lo mismo en todas las culturas."}, {"titulo": "Prox\u00e9mica.", "contenido": "\u2022 Estructuras espaciales.<br><br>\u2022 Se refiere a la separaci\u00f3n que mantenemos en c\u00edrculos \u00edntimos, como puede ser con amigos muy cercanos o familiares. En este caso, la distancia oscila entre 0 y 45 cent\u00edmetros. <br><br>Ejemplo: es el caso de las conversaciones con tu pareja, pero esta comunicaci\u00f3n tambi\u00e9n puede ser usada como intimidaci\u00f3n."}]}, "2": {"tarjetas": [{"titulo": "1", "contenido": "Pellizcarse o tocarse alguna parte de la cara (frente, pelo, cejas, oreja, labios) o morderse las u\u00f1as: <strong>Dudas, Inseguridad, nerviosismo.</strong>"}, {"titulo": "2", "contenido": "Tocarse la nariz mientras se habla: <strong>Se est\u00e1 mintiendo.</strong>"}, {"titulo": "3", "contenido": "Apoyar la mano en la barbilla: <strong>Aburrimiento, falta de inter\u00e9s por cansancio.</strong>"}, {"titulo": "4", "contenido": "Acariciarse el ment\u00f3n: <strong>Aceptaci\u00f3n positiva, toma de decisiones.</strong>"}, {"titulo": "5", "contenido": "Retorcer y entrelazar las manos, abrir y cerrar los pu\u00f1os: <strong>Ansiedad.</strong>"}, {"titulo": "6", "contenido": "Entrelazar los dedos: <strong>Autoridad y seguridad.</strong>"}, {"titulo": "7", "contenido": "Palma de la mano abierta y hacia arriba: <strong>Sinceridad, buenas intenciones.</strong>"}, {"titulo": "8", "contenido": "Jugar con un bol\u00edgrafo, anillo o cualquier otro objeto: <strong>Distracci\u00f3n, nerviosismo.</strong>"}, {"titulo": "9", "contenido": "Golpear ligeramente los dedos contra una mesa o reposabrazos de la silla: <strong>Impaciencia.</strong>"}, {"titulo": "10", "contenido": "Tener los brazos cruzados a la altura del pecho: <strong>Actitud defensiva.</strong>"}, {"titulo": "11", "contenido": "Sujetar algo contra el pecho (Chaqueta, bolso, portafolios\u2026): <strong>Miedo a los retos.</strong>"}, {"titulo": "12", "contenido": "Asentir con la cabeza mientras habla el entrevistador: <strong>Inter\u00e9s, escucha activa.</strong>"}, {"titulo": "13", "contenido": "Cejas completamente levantadas: <strong>Incredulidad.</strong>"}, {"titulo": "14", "contenido": "Cejas medio levantadas: <strong>Sorpresa.</strong>"}, {"titulo": "15", "contenido": "Cejas medio fruncidas: <strong>Confusi\u00f3n.</strong>"}, {"titulo": "16", "contenido": "Cejas completamente fruncidas: <strong>Enfado.</strong>"}, {"titulo": "17", "contenido": "Mirada huidiza o esquiva al entrevistador: <strong>Timidez, dificultad para integrarse, sin iniciativa.</strong>"}, {"titulo": "18", "contenido": "Bajar la mirada: <strong>Incredulidad de lo que se escucha o lo que ve.</strong>"}, {"titulo": "19", "contenido": "Mirar por encima de las gafas al reclutador: <strong>Desconfianza.</strong>"}, {"titulo": "20", "contenido": "Mirar con los ojos entreabiertos: <strong>Desaprobar o no estar de acuerdo.</strong>"}, {"titulo": "21", "contenido": "Mirar el reloj o frotarse las manos: <strong>Impaciencia.</strong>"}, {"titulo": "22", "contenido": "Mirar directamente a la cara al entrevistador, pero no de forma excesivamente continuada: <strong>Inter\u00e9s, concentraci\u00f3n, confianza en ti mismo.</strong>"}, {"titulo": "23", "contenido": "Sonrisa amplia y sincera: <strong>Imagen positiva.</strong>"}, {"titulo": "24", "contenido": "Balancear tu cuerpo: <strong>Tensi\u00f3n, dudas.</strong>"}, {"titulo": "25", "contenido": "Moverse continuamente en el asiento: <strong>Nerviosismo, ansiedad e inseguridad.</strong>"}, {"titulo": "26", "contenido": "Balancear un pie mientras tenemos las piernas cruzadas: <strong>Aburrimiento, desidia.</strong>"}, {"titulo": "27", "contenido": "Piernas torcidas, con las puntas de los pies juntas y talones separados: <strong>Nerviosismo, tensi\u00f3n.</strong>"}, {"titulo": "28", "contenido": "Postura excesivamente c\u00f3moda: <strong>Arrogancia.</strong>"}, {"titulo": "29", "contenido": "Postura relajada: <strong>Comodidad, nada que ocultar.</strong>"}, {"titulo": "30", "contenido": "Mantener una postura erguida y natural al estar sentados: <strong>Confianza, seguridad y sinceridad.<strong>"}, {"titulo": "31", "contenido": "Sentarse al borde de la silla: <strong>Indecisi\u00f3n, impaciencia, inseguridad.</strong>"}, {"titulo": "32", "contenido": "Sentarse repantigado: <strong>Falta de respeto.</strong>"}, {"titulo": "33", "contenido": "Inclinaci\u00f3n hacia delante: <strong>Atenci\u00f3n o inter\u00e9s.</strong>"}, {"titulo": "34", "contenido": "Mantener una distancia \u00f3ptima con el entrevistador (al menos 1 metro): <strong>Educaci\u00f3n y respeto.</strong>"}, {"titulo": "35", "contenido": "Caminar erguido: <strong>Confianza y seguridad en s\u00ed mismo.</strong>"}]}, "3": {"tarjetas": []}};

function abrirTeoria(temaIndex, tarjetaIndex) {
    temaActual = temaIndex;
    tarjetaActual = tarjetaIndex;
    actualizarContenidoTeoria();
    actualizarFlechasTeorias();
    document.getElementById('modal-teoria').classList.add('activo');
    document.body.style.overflow = 'hidden';
}

function navegarTeoria(direccion) {
    if (temaActual === null) return;
    
    const tarjetasDelTema = temasData[temaActual].tarjetas;
    const totalTarjetas = tarjetasDelTema.length;
    const nuevaTarjeta = tarjetaActual + direccion;
    
    if (nuevaTarjeta >= 0 && nuevaTarjeta < totalTarjetas) {
        tarjetaActual = nuevaTarjeta;
        actualizarContenidoTeoria();
        actualizarFlechasTeorias();
    }
}

function actualizarContenidoTeoria() {
    if (temaActual === null) return;
    
    const tarjetasDelTema = temasData[temaActual].tarjetas;
    const data = tarjetasDelTema[tarjetaActual];
    
    if (data) {
        document.getElementById('modal-teoria-titulo').textContent = data.titulo;
        document.getElementById('modal-teoria-contenido').innerHTML = data.contenido;
    }
}

function actualizarFlechasTeorias() {
    if (temaActual === null) return;
    
    const tarjetasDelTema = temasData[temaActual].tarjetas;
    const totalTarjetas = tarjetasDelTema.length;
    const flechaIzq = document.getElementById('flecha-izq-teoria');
    const flechaDer = document.getElementById('flecha-der-teoria');
    
    if (flechaIzq) flechaIzq.style.display = (tarjetaActual <= 0) ? 'none' : 'block';
    if (flechaDer) flechaDer.style.display = (tarjetaActual >= totalTarjetas-1) ? 'none' : 'block';
}

function cerrarTeoriaModal() {
    temaActual = null;
    tarjetaActual = 0;
    document.getElementById('modal-teoria').classList.remove('activo');
    document.body.style.overflow = 'auto';
}

// Touch events para móviles
let touchStartX = 0;
let touchEndX = 0;

document.addEventListener('touchstart', e => {
    touchStartX = e.changedTouches[0].screenX;
});

document.addEventListener('touchend', e => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
});

function handleSwipe() {
    const swipedDistance = touchStartX - touchEndX;
    if (Math.abs(swipedDistance) > 50) {
        if (swipedDistance > 0) {
            navegarTeoria(1);
        } else {
            navegarTeoria(-1);
        }
    }
}

document.addEventListener('keydown', function(e){
    if(e.key==='Escape') cerrarTeoriaModal();
    if(document.getElementById('modal-teoria').classList.contains('activo')){
        if(e.key==='ArrowLeft') navegarTeoria(-1);
        if(e.key==='ArrowRight') navegarTeoria(1);
    }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <script>
        // ==========================
        // SINCRONIZACIÓN
        // ==========================
        
        // ID de la actividad actual (debe coincidir con el ID en la página principal)
        const CURRENT_ACTIVITY_ID = 'activity-2-1';
        
        // Función para marcar la actividad como completada
        function markActivityCompleted() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            // Obtener el progreso actual del usuario
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            let progressData = savedProgress ? JSON.parse(savedProgress) : {};
            
            // Marcar esta actividad como completada
            progressData[CURRENT_ACTIVITY_ID] = true;
            
            // Guardar en localStorage
            localStorage.setItem(progressKey, JSON.stringify(progressData));
            
            // Disparar evento para sincronizar otras pestañas
            window.dispatchEvent(new Event('storage'));
            
            // Mostrar indicador de progreso
            document.getElementById('progress-indicator').classList.add('visible');
            
            return true;
        }
        
        // Función para verificar si la actividad ya está completada
        function checkActivityStatus() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            
            if (savedProgress) {
                const progressData = JSON.parse(savedProgress);
                if (progressData[CURRENT_ACTIVITY_ID]) {
                    document.getElementById('progress-indicator').classList.add('visible');
                    return true;
                }
            }
            
            return false;
        }
        
        // Función para navegar al siguiente tema
        function goNext() {
            console.log('Función goNext() ejecutada');
            
            // Primero marcar como completado si no lo está
            if (!checkActivityStatus()) {
                markActivityCompleted();
            }
            
            // Navegar a la siguiente página
            window.location.href = 'foro.html';
        }
        
        // Función para volver al curso
        function goBack() {
            window.location.href = '../../index.html';
        }
        
        // Cuando la página carga, verificar el estado de la actividad
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Página cargada');
            
            // Verificar si hay un usuario logueado
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser) {
                console.log('Usuario encontrado:', currentUser.fullname);
                
                // Si la actividad no está marcada como completada, marcarla
                if (!checkActivityStatus()) {
                    markActivityCompleted();
                }
                
                // Agregar event listener al botón de siguiente
                document.getElementById('next-button').addEventListener('click', goNext);
                
            } else {
                console.log('No hay usuario logueado');
                
                // Si no hay usuario, ocultar los botones de navegación
                document.querySelector('.page-navigation').style.display = 'none';
                alert('Por favor, inicia sesión en el curso primero.');
            }
        });
        
        // Escuchar eventos de storage para actualizaciones desde otras pestañas
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('progress_')) {
                checkActivityStatus();
            }
        });
    </script>
</body>
</html>