<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MODULO I</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Estilos para la navegación */
.page-navigation {
    display: flex;
    justify-content: space-between;
    margin-top: 2rem;         /* en lugar de 40px */
    padding: 1rem 0;          /* en lugar de 20px */
    border-top: 1px solid #ddd;
    flex-wrap: wrap;          /* se acomoda en varias filas si la pantalla es pequeña */
    gap: 1rem;
}

.nav-btn {
    background-color: #2980b9;
    color: white;
    border: none;
    padding: 0.8rem 1.5rem;   /* escalable */
    border-radius: 0.5rem;
    cursor: pointer;
    font-size: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex: 1 1 auto;           /* los botones se adaptan al ancho disponible */
    max-width: 200px;         /* pero no crecen demasiado */
    text-align: center;
    justify-content: center;
}

.nav-btn:hover {
    background-color: #2c3e50;
}

.nav-btn.prev {
    background-color: #7f8c8d;
}

.nav-btn.prev:hover {
    background-color: #34495e;
}

/* Estilos para el iframe */
.esquema iframe {
    border: 1px solid #b4b3b3;
    border-radius: 0.5rem;
    margin-top: 1rem;
    width: 100%;              /* ocupa todo el ancho disponible */
    max-width: 100%;
    height: 700px;             /* se adapta */
    aspect-ratio: 16 / 9;     /* mantiene proporción responsiva */
    overflow: hidden;
}

/* Indicador de progreso */
.progress-indicator {
    text-align: center;
    padding: 0.8rem;
    background-color: #e8f4f8;
    border-radius: 0.5rem;
    margin: 1.5rem 0;
    display: none;
}

.progress-indicator.visible {
    display: block;
}

    </style>
</head>
<body>
    <div class="contenedor0">
        <h1>Módulo I: El concepto de actitud</h1>
        <h2>Introducción</h2>
    </div>

    <div class="progress-indicator" id="progress-indicator">
        <p>✅ Esta actividad ha sido marcada como completada en tu progreso</p>
    </div>

    <div class="contenedor">
        <h3>“Las actitudes son más importantes que las aptitudes.”</h3>  
        <h3>Sir Winston Churchill.</h3>
    </div>

    <div class="conte0">
        <p>En el desarrollo de las actividades cotidianas, influyen una serie de factores como: las
            relaciones interpersonales, los valores, la comunicación y la voluntad; mismos que
            impactan en el desempeño laboral.
        </p>

        <p>Las relaciones interpersonales dependen en gran medida de la percepción social;
            nos comportamos con los demás, según los percibimos. A veces ocurre que nos hacemos una 
            primera impresión positiva o negativa, de alguien que acabamos de conocer; cosa
            que influye en la manera de comportarnos.
        </p>

        <p>
            Las actitudes que adoptamos ante las cosas, las personas y las circunstancias que nos rodean,
            van conformando nuestra personalidad y, por lo tanto, la forma en que realizamos nuestro trabajo.
        </p>
    </div>

    <div class="conte0">
        <p>
            Es importante tener hábitos y valores que prioricen actitudes positivas y practicarlas constantemente,
            a fin de lograr que enriquezcan el crecimiento personal para el logro del porvenir y una sana convivencia
            con los demás.
        </p>
    </div>

    <div class="conte0">
        <p>
           En este módulo, se explican los conceptos, fundamentos y elementos básicos sobre la actitud. Te presentamos una 
           opción para complementar tus conocimientos y experiencias sobre el tema, permitiéndote identificar y conocer la importancia
           de las actitudes en el trabajo, de esta manera podrás adquirir una mayor conciencia acerca de las ventajas y desventajas
           que derivan en tu manera de actuar.
        </p>
    </div>

    <div class="objetivos">
        <h4>Objetivo particular</h4>
        <p>Analizar las principales actitudes que exteriorizamos frente a las circunstancias y situaciones que se nos 
            presentan en el trabajo.
        </p>
    </div>

    <div class="temario">
        <h4>Temario</h4>
        <p>En este módulo abarcaremos los siguientes temas:<br>
            • ¿Qué es la actitud?<br>
            • La actitud de servicio.<br>
            • Las actitudes en el trabajo.</p>
    </div>

    <div class="esquema">
        <h4>Esquema conceptual</h4>
        <iframe src="esquema.html" width="100%" height="1230" frameborder="0"></iframe>
    </div>

    <div class="page-navigation">
        <button class="nav-btn prev" onclick="goBack()">
            <i class="fas fa-arrow-left"></i> Volver al Curso
        </button>
        
        <button class="nav-btn next" onclick="goNext()">
            Siguiente Tema <i class="fas fa-arrow-right"></i>
        </button>
    </div>

    <!-- Font Awesome para iconos -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <script>
        // ==========================
        // SISTEMA DE SINCRONIZACIÓN
        // ==========================
        
        // ID de la actividad actual (debe coincidir con el ID en la página principal)
        const CURRENT_ACTIVITY_ID = 'activity-1-0';
        
        // Función para marcar la actividad como completada
        function markActivityCompleted() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            // Obtener el progreso actual del usuario
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            let progressData = savedProgress ? JSON.parse(savedProgress) : {};
            
            // Marcar esta actividad como completada
            progressData[CURRENT_ACTIVITY_ID] = true;
            
            // Guardar en localStorage
            localStorage.setItem(progressKey, JSON.stringify(progressData));
            
            // Disparar evento para sincronizar otras pestañas
            window.dispatchEvent(new Event('storage'));
            
            // Mostrar indicador de progreso
            document.getElementById('progress-indicator').classList.add('visible');
            
            return true;
        }
        
        // Función para verificar si la actividad ya está completada
        function checkActivityStatus() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            
            if (savedProgress) {
                const progressData = JSON.parse(savedProgress);
                if (progressData[CURRENT_ACTIVITY_ID]) {
                    document.getElementById('progress-indicator').classList.add('visible');
                    return true;
                }
            }
            
            return false;
        }
        
        // Función para navegar al siguiente tema
        function goNext() {
            // Primero marcar como completado si no lo está
            if (!checkActivityStatus()) {
                markActivityCompleted();
            }
            
            // Navegar al Tema 1
            window.location.href = '../MODULO1/1/Tema1.html';
        }
        
        // Función para volver al curso
        function goBack() {
            window.location.href = '../index.html'; // Ajusta según tu estructura
        }
        
        // Cuando la página carga, verificar el estado de la actividad
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar si hay un usuario logueado
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser) {
                // Si la actividad no está marcada como completada, marcarla
                if (!checkActivityStatus()) {
                    markActivityCompleted();
                }
            } else {
                // Si no hay usuario, ocultar los botones de navegación
                document.querySelector('.page-navigation').style.display = 'none';
                alert('Por favor, inicia sesión en el curso primero.');
            }
        });
        
        // Escuchar eventos de storage para actualizaciones desde otras pestañas
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('progress_')) {
                checkActivityStatus();
            }
        });
    </script>
</body>
</html>