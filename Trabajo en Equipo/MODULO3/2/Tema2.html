<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MODULO III</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    line-height: 1.6; 
    color: #333; 
    background-color: #f5f5f5; 
    padding: 20px; 
    max-width: 1000px; 
    margin: 0 auto; 
}
.Titulo { 
    text-align: center; 
    padding: 30px 20px; 
    margin-bottom: 20px; 
    background: linear-gradient(135deg, #2c3e50 0%, #4a6580 100%); 
    color: white; 
    border-radius: 8px; 
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.Titulo h1 { 
    font-size: clamp(1.8rem, 4vw, 2.5rem); 
    margin-bottom: 15px; 
    font-weight: 600;
}
.Titulo h2 { 
    font-size: clamp(1.2rem, 2.5vw, 1.5rem); 
    font-weight: 400; 
    opacity: 0.9;
}
.citaT-Autor { 
    background-color: #fff; 
    padding: 25px; 
    margin: 20px 0; 
    border-left: 5px solid #3498db; 
    border-radius: 4px; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
    font-style: italic; 
    color: #555;
}
.citaT-Autor h3:first-child { 
    font-size: clamp(1.2rem, 3vw, 1.4rem); 
    margin-bottom: 15px; 
    line-height: 1.5; 
    color: #2c3e50;
}
.citaT-Autor h3:last-child { 
    text-align: right; 
    font-size: clamp(1.1rem, 2.5vw, 1.3rem); 
    color: #000; 
    font-style: normal; 
    margin-top: 10px;
}
.Parrafo { 
    background-color: white; 
    padding: 25px; 
    border-radius: 8px; 
    margin: 20px 0; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.Parrafo h2 { 
    font-size: clamp(1.3rem, 3vw, 1.6rem); 
    margin-bottom: 15px; 
    color: #2c3e50;
}
.Parrafo p { 
    text-align: justify; 
    margin-bottom: 20px; 
    font-size: clamp(1.1rem, 2.5vw, 1.4rem); 
    line-height: 1.7;
}
.Parrafo img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 15px auto;
    display: block;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.Referencia { 
    background-color: #fff; 
    text-align: justify; 
    padding: 25px; 
    margin: 20px 0; 
    border-left: 5px solid #3498db; 
    border-radius: 4px; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
    font-style: italic; 
    color: #000;
}
.Referencia h3 { 
    text-align: justify; 
    font-weight: bold;
    font-size: clamp(1.1rem, 2.5vw, 1.3rem);
}
.Tema { 
    background-color: white; 
    padding: 25px; 
    border-radius: 8px; 
    margin: 20px 0; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
    border-top: 4px solid #ff771c;
}
.Tema h4 { 
    font-size: clamp(1.2rem, 3vw, 1.4rem); 
    color: #ff771c; 
    margin-bottom: 10px;
}
.Tema p { 
    display: block; 
    margin-top: 15px; 
    font-size: clamp(1.1rem, 2.5vw, 1.4rem); 
    line-height: 1.6;
}
.Tema img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 15px auto;
    display: block;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.container-tarjet { 
    margin-top: 20px; 
    display: flex; 
    flex-wrap: wrap; 
    gap: 15px;
}
.tarjetas { 
    background-color: white; 
    border-radius: 12px; 
    box-shadow: 0 3px 10px rgba(0,0,0,0.1); 
    overflow: hidden; 
    transition: all 0.3s ease; 
    cursor: pointer; 
    border: 2px solid transparent; 
    margin-bottom: 15px; 
    flex: 1 1 300px; 
    max-width: 100%;
}
.tarjetas:hover { 
    transform: translateY(-3px); 
    box-shadow: 0 5px 15px rgba(0,0,0,0.15); 
    border-color: #2c3e50;
}
.header-tarjet { 
    background-color: #5493d1; 
    color: white; 
    padding: 15px; 
    display: flex; 
    justify-content: space-between; 
    align-items: center;
}
.header-tarjet h3 {
    font-size: clamp(1rem, 2.5vw, 1.2rem);
    margin: 0;
}
.modal-overlay { 
    display: none; 
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    background: rgba(0,0,0,0.7); 
    z-index: 1000; 
    align-items: center; 
    justify-content: center;
}
.modal-overlay.activo { 
    display: flex;
}
.modal-teoria { 
    background-color: white; 
    border-radius: 12px; 
    box-shadow: 0 10px 30px rgba(0,0,0,0.3); 
    max-width: 90%; 
    width: 900px;
    max-height: 85vh; 
    overflow-y: auto; 
    position: relative; 
    animation: modalAppear 0.3s ease-out;
}
.modal-teoria-header { 
    background-color: #6695c4; 
    color: white; 
    padding: 20px; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    border-radius: 12px 12px 0 0;
}
.modal-teoria-contenido { 
    padding: 25px; 
    font-size: clamp(14px, 2vw, 19px); 
    line-height: 1.7;
}
.modal-teoria-contenido img {
    max-width: 70%;
    height: auto;
    border-radius: 8px;
    margin: 10px auto;
    display: block;
}
.flecha-externa { 
    position: absolute; 
    top: 50%; 
    transform: translateY(-50%); 
    background: rgba(255,255,255,0.8); 
    border: none; 
    border-radius: 50%; 
    width: 50px; 
    height: 50px; 
    font-size: 18px; 
    cursor: pointer; 
    z-index: 1001; 
    transition: all 0.3s ease;
}
.flecha-externa:hover { 
    background: white; 
    transform: translateY(-50%) scale(1.1);
}
.flecha-izquierda { left: 80px; }
.flecha-derecha { right: 80px; }
.cerrar-btn { 
    position: absolute; 
    top: 15px; 
    right: 15px; 
    background: none; 
    border: none; 
    font-size: 24px; 
    cursor: pointer; 
    color: white;
}

/* Indicador de progreso */
        .progress-indicator {
            text-align: center;
            padding: 10px;
            background-color: #e8f4f8;
            border-radius: 5px;
            margin: 20px 0;
            display: none;
        }
/* Estilos para la navegación */
        .page-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding: 20px 0;
            border-top: 1px solid #ddd;
        }
        
        .nav-btn {
            background-color: #2980b9;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover {
            background-color: #2c3e50;
        }
        
        .nav-btn.prev {
            background-color: #7f8c8d;
        }
        
        .nav-btn.prev:hover {
            background-color: #34495e;
        }

@keyframes modalAppear { 
    from { opacity: 0; transform: scale(0.8);} 
    to { opacity: 1; transform: scale(1);}
}

/* Responsive */
@media (max-width: 768px) {
    body { padding: 10px; }
    .Titulo, .citaT-Autor, .Parrafo, .Referencia, .Tema { 
        padding: 20px 15px; 
        margin: 15px 0;
    }
    .container-tarjet { 
        gap: 10px;
    }
    .tarjetas { 
        flex: 1 1 100%;
    }
    .modal-teoria { 
        max-width: 95%; 
        margin: 10px;
    }
    .flecha-externa {
        width: 35px;
        height: 35px;
        font-size: 16px;
    }
    .Parrafo img,
    .Tema img {
        max-width: 85%;
    }
}

@media (max-width: 480px) {
    body { padding: 5px; }
    .Titulo, .citaT-Autor, .Parrafo, .Referencia, .Tema { 
        padding: 15px 10px; 
        margin: 10px 0;
    }
    .modal-teoria-header,
    .modal-teoria-contenido {
        padding: 15px;
    }
    .Parrafo img,
    .Tema img {
        max-width: 90%;
    }
}
</style>
</head>
<body>
<div class="Titulo"><h1>Tema 2. ¿Cómo resolver problemas al trabajar en equipo?</h1></div>
<div class="progress-indicator" id="progress-indicator">
        <p>✅ Esta actividad ha sido marcada como completada en tu progreso</p>
    </div>

    <div class="Tema" style="border-top-color: #ff771c">
        <h4 style="color: #ff771c"></h4>
        <p>El trabajo en equipo se fortalece si es capaz de detectar problemas, enfocarse en ellos y tratar de resolverlos de la manera más efectiva.<br><br>
Barner (2001) recomienda tomar en cuenta 5 factores:</p><p style="color: grey;">Haz clic en los botones azules.</p><div class="container-tarjet"><div class="tarjetas" onclick="abrirTeoria(0, 0)"><div class="header-tarjet"><h3>1. Cada miembro del equipo, afecta el desempeño y los resultados del mismo.</h3></div></div><div class="tarjetas" onclick="abrirTeoria(0, 1)"><div class="header-tarjet"><h3>2. Quienes pueden aportar las mejores soluciones para los problemas del equipo son los miembros de este.</h3></div></div><div class="tarjetas" onclick="abrirTeoria(0, 2)"><div class="header-tarjet"><h3>3. La evaluación de la situación real del equipo.</h3></div></div><div class="tarjetas" onclick="abrirTeoria(0, 3)"><div class="header-tarjet"><h3>4. La mejoría en el desempeño de los equipos solo puede lograrse a través de enfocar directamente los problemas.</h3></div></div><div class="tarjetas" onclick="abrirTeoria(0, 4)"><div class="header-tarjet"><h3>5. Todos los equipos precisan de procesos de solución de problemas.</h3></div></div></div></div>

    <div class="Tema" style="border-top-color: #ff771c">
        <h4 style="color: #ff771c"></h4>
        <p>Lo siguiente muestra, por la experiencia, la solución acordada entre todos los integrantes:</p><p style="color: grey;">Haz clic en los botones azules.</p><div class="container-tarjet"><div class="tarjetas" onclick="abrirTeoria(1, 0)"><div class="header-tarjet"><h3>1) Identificar el problema.</h3></div></div><div class="tarjetas" onclick="abrirTeoria(1, 1)"><div class="header-tarjet"><h3>2) Iniciar un proyecto de solución del problema.</h3></div></div><div class="tarjetas" onclick="abrirTeoria(1, 2)"><div class="header-tarjet"><h3>3) Construir un plan de acción.</h3></div></div><div class="tarjetas" onclick="abrirTeoria(1, 3)"><div class="header-tarjet"><h3>4) Establecer compromisos.</h3></div></div></div></div>

    <div class="Tema" style="border-top-color: #ff771c">
        <h4 style="color: #ff771c">Causas y soluciones.</h4>
        <p>Por lo general, las principales causas de problemas giran en torno a los siguientes factores: <br><br>
A. problemas relacionados con las relaciones interpersonales del equipo. <br><br>
Si el equipo es disfuncional, entonces sus integrantes tendrán dificultades para comunicarse, no podrán enfrentar retos importantes, porque estos solo se superan cuando las relaciones entre los integrantes son lo suficientemente sólidos.</p><p style="color: grey;">Haz clic en los botones azules.</p><div class="container-tarjet"><div class="tarjetas" onclick="abrirTeoria(2, 0)"><div class="header-tarjet"><h3>Algunas características que distinguen a los equipos con conflictos internos son:</h3></div></div><div class="tarjetas" onclick="abrirTeoria(2, 1)"><div class="header-tarjet"><h3>¿Cuál es la solución para este tipo de problemas?</h3></div></div></div></div>

    <div class="Tema" style="border-top-color: #ff771c">
        <h4 style="color: #ff771c"></h4>
        <p>B. problemas relacionados con la incapacidad del equipo para ser previsor. <br><br>
Estos problemas, de acuerdo con Barner (2001) se manifiestan: <br><br>
• Cuando no hay un acercamiento efectivo a los problemas y las oportunidades, el equipo se centra en lo reactivo, pero no en lo proactivo. No ven hacia adelante, sino hacia atrás y su tiempo se gasta en tratar de descubrir qué es lo que sucedió y cómo reaccionarán.</p><p style="color: grey;">Haz clic en el botón azul.</p><div class="container-tarjet"><div class="tarjetas" onclick="abrirTeoria(3, 0)"><div class="header-tarjet"><h3>¿Cuál es la solución para este tipo de problemas?</h3></div></div></div></div>

    <div class="Tema" style="border-top-color: #ff771c">
        <h4 style="color: #ff771c"></h4>
        <p>C. problemas relacionados con la incapacidad del equipo para mantenerse firme en sus objetivos. <br><br>
Todo equipo debe estar dotado con las capacidades de saber en dónde se encuentra en un momento específico y de no perder su objetivo. Esto es lo que le permite mantenerse con firmeza, vinculado cotidianamente con sus metas a largo plazo y con las que la organización tiene establecida. <br><br>
En el caso de que el equipo no tenga claro cuáles son sus objetivos, los integrantes simplemente desconocerán qué es lo que tienen que hacer, cómo deben hacerlo, para qué deben hacerlo, qué valor tienen las contribuciones que cada uno pueda hacer.</p><p style="color: grey;">Haz clic en los botones azules.</p><div class="container-tarjet"><div class="tarjetas" onclick="abrirTeoria(4, 0)"><div class="header-tarjet"><h3>Las causas de estos problemas estriban en diversos factores:</h3></div></div><div class="tarjetas" onclick="abrirTeoria(4, 1)"><div class="header-tarjet"><h3>¿Cuál es la solución para este tipo de problemas?</h3></div></div></div></div>

<div class="modal-overlay" id="modal-teoria">
    <button class="flecha-externa flecha-izquierda" id="flecha-izq-teoria" onclick="navegarTeoria(-1)">←</button>
    <div class="modal-teoria">
        <div class="modal-teoria-header">
            <h3 id="modal-teoria-titulo">Título Teoría</h3>
        </div>
        <div class="modal-teoria-contenido" id="modal-teoria-contenido">
            <!-- Contenido se insertará dinámicamente -->
        </div>
        <button class="cerrar-btn" onclick="cerrarTeoriaModal()">X</button>
    </div>
    <button class="flecha-externa flecha-derecha" id="flecha-der-teoria" onclick="navegarTeoria(1)">→</button>
</div>

<div class="page-navigation">
        <button class="nav-btn prev" onclick="goBack()">
            ← Volver al Curso
        </button>
        
        <button class="nav-btn next" id="next-button">
            Siguiente Tema →
        </button>
    </div>

<script>
// MODIFICADO: Sistema de tarjetas por tema
let temaActual = null;
let tarjetaActual = 0;
const temasData = {"0": {"tarjetas": [{"titulo": "1. Cada miembro del equipo, afecta el desempe\u00f1o y los resultados del mismo.", "contenido": "ES DE VITAL IMPORTANCIA QUE SEA CUAL SEA EL PAPEL QUE EL INTEGRANTE DESEMPE\u00d1E, COMPRENDA QUE PUEDE INTERVENIR PARA QUE EL EQUIPO IDENTIFIQUE LAS DIFICULTADES QUE ENCARA EN UN MOMENTO DADO. ES DECIR, CADA MIEMBRO PUEDE TOMAR LA INICIATIVA, EJERCER, INFLUENCIA, GENERAR UN IMPACTO PRODUCTIVO, COMPARTIR IDEAS E INFORMACI\u00d3N VALIOSA PARA SOLUCIONAR LOS PROBLEMAS DEL EQUIPO."}, {"titulo": "2. Quienes pueden aportar las mejores soluciones para los problemas del equipo son los miembros de este.", "contenido": "LOS INTEGRANTES DEL EQUIPO SON LOS M\u00c1S INDICADOS PARA COMPRENDER CON EXACTITUD LAS EXIGENCIAS Y OBST\u00c1CULOS QUE IMPIDEN EL DESEMPE\u00d1O \u00d3PTIMO, SIEMPRE QUE SE OBTENGA UN DIAGN\u00d3STICO SOBRE LOS ASPECTOS DE MEJORA, POR LO TANTO, ES IMPORTANTE QUE LOS MIEMBROS EST\u00c9N INVOLUCRADOS EN LOS PROBLEMAS Y SU SOLUCI\u00d3N."}, {"titulo": "3. La evaluaci\u00f3n de la situaci\u00f3n real del equipo.", "contenido": "EL ESFUERZO DEL EQUIPO DEBE DIRIGIRSE PARA LOGRAR UNA EVALUACI\u00d3N DE LOS PROBLEMAS QUE AFECTAN SU DESEMPE\u00d1O. LOS INTEGRANTES DEBEN \u201cAPROPIARSE\u201d DEL PROCESO Y CONDUCIRSE DE ACUERDO A MECANISMOS QUE PERMITAN EVALUAR CON PRECISI\u00d3N DIFERENTES SITUACIONES."}, {"titulo": "4. La mejor\u00eda en el desempe\u00f1o de los equipos solo puede lograrse a trav\u00e9s de enfocar directamente los problemas.", "contenido": "LOS INTEGRANTES DEBEN ACUDIR A SUS PROPIAS EXPERIENCIAS Y NO SENTIRSE INTIMIDADOS POR EL TAMA\u00d1O Y EXISTENCIA DE LOS PROBLEMAS. POR EL CONTRARIO, DEBEN PROPONER SOLUCIONES VIABLES."}, {"titulo": "5. Todos los equipos precisan de procesos de soluci\u00f3n de problemas.", "contenido": "SIN EMBARGO, EL RECONOCER LA EXISTENCIA DE PROBLEMAS, EL DESEO POR MEJORAR, LA EVALUACI\u00d3N DE LAS DIFICULTADES Y EL PAPEL QUE CADA UNO JUEGA PARA RESOLVERLOS, REQUIERE DE UNA METODOLOG\u00cdA QUE GUIE AL EQUIPO EN LA RESOLUCI\u00d3N DE PROBLEMAS."}]}, "1": {"tarjetas": [{"titulo": "1) Identificar el problema.", "contenido": "\u2022 La existencia de s\u00edntomas y causas que provocan el problema.<br><br>\u2022 Seguir la trayectoria del problema desde su surgimiento.<br><br>\u2022 La trascendencia que puede tener el problema para el logro de los objetivos y metas organizacionales. <br><br>\u2022 Impacto del problema en la productividad."}, {"titulo": "2) Iniciar un proyecto de soluci\u00f3n del problema.", "contenido": "\u2022 Lo principal al solucionar un problema es que se aprovechen todos los talentos y sugerencias de los integrantes del equipo.<br><br>\u2022 El proceso por la b\u00fasqueda de soluciones debe abocarse a que el equipo no vea solo lo evidente, sino que profundice, tratando de hallar las razones verdaderas por las cuales los problemas han surgido.<br><br>\u2022 Es necesario fomentar la participaci\u00f3n de todos los miembros, intentando sugerir una amplia gama de soluciones creativas, innovadoras, evaluando su viabilidad."}, {"titulo": "3) Construir un plan de acci\u00f3n.", "contenido": "\u2022 Identificar las acciones requeridas. <br><br>\u2022 Acordar los resultados deseados. <br><br>\u2022 Asignar responsabilidades. <br><br>\u2022 Planear acciones reales a seguir. <br><br>\u2022 Llevar acabo la soluci\u00f3n del problema."}, {"titulo": "4) Establecer compromisos.", "contenido": "\u2022 Implica que los miembros del equipo se concienticen de que son responsables en la resoluci\u00f3n exitosa de los problemas. <br><br>\u2022 El que un equipo est\u00e9 comprometido con la calidad en su desempe\u00f1o, evita que un problema sea pasado por alto y que se le preste atenci\u00f3n inmediata, antes de que est\u00e9 fuera de control. Los problemas que se asumen desde el inicio se pueden solucionar a tiempo."}]}, "2": {"tarjetas": [{"titulo": "Algunas caracter\u00edsticas que distinguen a los equipos con conflictos internos son:", "contenido": "\u2022 El m\u00e1s peque\u00f1o conflicto crece incontroladamente.<br><br>\u2022 Algunos integrantes prefieren aislarse con tal de no verse involucrados. Esto impide su participaci\u00f3n en las confrontaciones, pero tambi\u00e9n se corta la comunicaci\u00f3n potencialmente valiosa.<br><br>\u2022 Si la comunicaci\u00f3n y la ayuda entre integrantes han cesado, estos pueden empezar a buscarlos por medio de la intimidaci\u00f3n, la amenaza o las exigencias con tendencia a la dominaci\u00f3n.<br><br>\u2022 Los miembros de equipo en conflicto, en vez de tratar de resolver esto, buscan fortalecerse por medio del establecimiento de alianzas con la autoridad, ejerciendo presi\u00f3n y acrecentando la hostilidad, la exclusi\u00f3n y la tendencia a ignorar a otros, todo lo cual agrava la situaci\u00f3n.<br><br>\u2022 Algunos integrantes pueden comenzar a atacar a sus compa\u00f1eros por medio de t\u00e1cticas como diseminaci\u00f3n de rumores falsos, negaci\u00f3n a brindar apoyo, incitar a los dem\u00e1s a sabotear el trabajo de aquellos con quienes se tienen problemas y hablar mal a las espaldas de otros."}, {"titulo": "\u00bfCu\u00e1l es la soluci\u00f3n para este tipo de problemas?", "contenido": "\u2022 No hacer ataques personales. <br><br>\u2022 Evitar discusiones en las que las emociones est\u00e9n fuera de control. <br><br>\u2022 Tratar los asuntos directamente con las partes involucradas y no con terceros. <br><br>\u2022 Abandonar las actitudes hostiles. <br><br>\u2022 Escuchar las razones de los otros. <br><br>\u2022 Identificar las \u00e1reas de conflicto potencial. <br><br>\u2022 Recurrir a un mediador imparcial. <br><br>\u2022 Tratar los conflictos en el momento y el contexto adecuado."}]}, "3": {"tarjetas": [{"titulo": "\u00bfCu\u00e1l es la soluci\u00f3n para este tipo de problemas?", "contenido": "\u2022 Establecer un sistema que permita prever, analizando los siguientes puntos: <br><br>\u2022 \u00bfCu\u00e1les son los principales factores que podr\u00edan ejercer alguna influencia sobre el desempe\u00f1o del equipo?<br><br>\u2022 \u00bfC\u00f3mo afecta a cada uno de estos factores el desempe\u00f1o del equipo? <br><br>\u2022 Establecer un plan que contemple las acciones tanto preventivas como, correctivas."}]}, "4": {"tarjetas": [{"titulo": "Las causas de estos problemas estriban en diversos factores:", "contenido": "\u2022 Una situaci\u00f3n de cambio que genere en el equipo inestabilidad y confusi\u00f3n al tratar de descifrar en qu\u00e9 consisten los cambios y qu\u00e9 significan para el equipo. <br><br>\u2022 Un estilo de liderazgo falto de direcci\u00f3n. <br><br>\u2022 Falta de planeaci\u00f3n. <br><br>\u2022 Falta de supervisi\u00f3n."}, {"titulo": "\u00bfCu\u00e1l es la soluci\u00f3n para este tipo de problemas?", "contenido": "\u2022 Conocer los objetivos de la organizaci\u00f3n. <br><br>\u2022 Revisar peri\u00f3dicamente c\u00f3mo se est\u00e1 desarrollando el trabajo en equipo. <br><br>\u2022 Aprender a tomar decisiones para discriminar lo importante de lo ef\u00edmero o poco relevante.<br><br>\u2022 Establecer prioridades que contribuyan a delimitar los objetivos y responsabilidades de cada miembro del equipo."}]}};

function abrirTeoria(temaIndex, tarjetaIndex) {
    temaActual = temaIndex;
    tarjetaActual = tarjetaIndex;
    actualizarContenidoTeoria();
    actualizarFlechasTeorias();
    document.getElementById('modal-teoria').classList.add('activo');
    document.body.style.overflow = 'hidden';
}

function navegarTeoria(direccion) {
    if (temaActual === null) return;
    
    const tarjetasDelTema = temasData[temaActual].tarjetas;
    const totalTarjetas = tarjetasDelTema.length;
    const nuevaTarjeta = tarjetaActual + direccion;
    
    if (nuevaTarjeta >= 0 && nuevaTarjeta < totalTarjetas) {
        tarjetaActual = nuevaTarjeta;
        actualizarContenidoTeoria();
        actualizarFlechasTeorias();
    }
}

function actualizarContenidoTeoria() {
    if (temaActual === null) return;
    
    const tarjetasDelTema = temasData[temaActual].tarjetas;
    const data = tarjetasDelTema[tarjetaActual];
    
    if (data) {
        document.getElementById('modal-teoria-titulo').textContent = data.titulo;
        document.getElementById('modal-teoria-contenido').innerHTML = data.contenido;
    }
}

function actualizarFlechasTeorias() {
    if (temaActual === null) return;
    
    const tarjetasDelTema = temasData[temaActual].tarjetas;
    const totalTarjetas = tarjetasDelTema.length;
    const flechaIzq = document.getElementById('flecha-izq-teoria');
    const flechaDer = document.getElementById('flecha-der-teoria');
    
    if (flechaIzq) flechaIzq.style.display = (tarjetaActual <= 0) ? 'none' : 'block';
    if (flechaDer) flechaDer.style.display = (tarjetaActual >= totalTarjetas-1) ? 'none' : 'block';
}

function cerrarTeoriaModal() {
    temaActual = null;
    tarjetaActual = 0;
    document.getElementById('modal-teoria').classList.remove('activo');
    document.body.style.overflow = 'auto';
}

// Touch events para móviles
let touchStartX = 0;
let touchEndX = 0;

document.addEventListener('touchstart', e => {
    touchStartX = e.changedTouches[0].screenX;
});

document.addEventListener('touchend', e => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
});

function handleSwipe() {
    const swipedDistance = touchStartX - touchEndX;
    if (Math.abs(swipedDistance) > 50) {
        if (swipedDistance > 0) {
            navegarTeoria(1);
        } else {
            navegarTeoria(-1);
        }
    }
}

document.addEventListener('keydown', function(e){
    if(e.key==='Escape') cerrarTeoriaModal();
    if(document.getElementById('modal-teoria').classList.contains('activo')){
        if(e.key==='ArrowLeft') navegarTeoria(-1);
        if(e.key==='ArrowRight') navegarTeoria(1);
    }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <script>
        // ==========================
        // SINCRONIZACIÓN
        // ==========================
        
        // ID de la actividad actual (debe coincidir con el ID en la página principal)
        const CURRENT_ACTIVITY_ID = 'activity-3-2';
        
        // Función para marcar la actividad como completada
        function markActivityCompleted() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            // Obtener el progreso actual del usuario
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            let progressData = savedProgress ? JSON.parse(savedProgress) : {};
            
            // Marcar esta actividad como completada
            progressData[CURRENT_ACTIVITY_ID] = true;
            
            // Guardar en localStorage
            localStorage.setItem(progressKey, JSON.stringify(progressData));
            
            // Disparar evento para sincronizar otras pestañas
            window.dispatchEvent(new Event('storage'));
            
            // Mostrar indicador de progreso
            document.getElementById('progress-indicator').classList.add('visible');
            
            return true;
        }
        
        // Función para verificar si la actividad ya está completada
        function checkActivityStatus() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            
            if (savedProgress) {
                const progressData = JSON.parse(savedProgress);
                if (progressData[CURRENT_ACTIVITY_ID]) {
                    document.getElementById('progress-indicator').classList.add('visible');
                    return true;
                }
            }
            
            return false;
        }
        
        // Función para navegar al siguiente tema
        function goNext() {
            console.log('Función goNext() ejecutada');
            
            // Primero marcar como completado si no lo está
            if (!checkActivityStatus()) {
                markActivityCompleted();
            }
            
            // Navegar a la siguiente página
            window.location.href = '../3/Tema3.html';
        }
        
        // Función para volver al curso
        function goBack() {
            window.location.href = '../../index.html';
        }
        
        // Cuando la página carga, verificar el estado de la actividad
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Página cargada');
            
            // Verificar si hay un usuario logueado
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser) {
                console.log('Usuario encontrado:', currentUser.fullname);
                
                // Si la actividad no está marcada como completada, marcarla
                if (!checkActivityStatus()) {
                    markActivityCompleted();
                }
                
                // Agregar event listener al botón de siguiente
                document.getElementById('next-button').addEventListener('click', goNext);
                
            } else {
                console.log('No hay usuario logueado');
                
                // Si no hay usuario, ocultar los botones de navegación
                document.querySelector('.page-navigation').style.display = 'none';
                alert('Por favor, inicia sesión en el curso primero.');
            }
        });
        
        // Escuchar eventos de storage para actualizaciones desde otras pestañas
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('progress_')) {
                checkActivityStatus();
            }
        });
    </script>
    <script src="../../MATY/MATY.js"></script>
</body>
</html>