<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MODULO III</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Estilos para la navegación */
.page-navigation {
    display: flex;
    justify-content: space-between;
    margin-top: 2rem;         /* en lugar de 40px */
    padding: 1rem 0;          /* en lugar de 20px */
    border-top: 1px solid #ddd;
    flex-wrap: wrap;          /* se acomoda en varias filas si la pantalla es pequeña */
    gap: 1rem;
}

.nav-btn {
    background-color: #2980b9;
    color: white;
    border: none;
    padding: 0.8rem 1.5rem;   /* escalable */
    border-radius: 0.5rem;
    cursor: pointer;
    font-size: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex: 1 1 auto;           /* los botones se adaptan al ancho disponible */
    max-width: 200px;         /* pero no crecen demasiado */
    text-align: center;
    justify-content: center;
}

.nav-btn:hover {
    background-color: #2c3e50;
}

.nav-btn.prev {
    background-color: #7f8c8d;
}

.nav-btn.prev:hover {
    background-color: #34495e;
}

/* Estilos para el iframe */
.esquema iframe {
    border: 1px solid #b4b3b3;
    border-radius: 0.5rem;
    margin-top: 1rem;
    width: 100%;              /* ocupa todo el ancho disponible */
    max-width: 100%;
    height: 1000px;             /* se adapta */
    aspect-ratio: 16 / 9;     /* mantiene proporción responsiva */
    overflow: hidden;
}

/* Indicador de progreso */
.progress-indicator {
    text-align: center;
    padding: 0.8rem;
    background-color: #e8f4f8;
    border-radius: 0.5rem;
    margin: 1.5rem 0;
    display: none;
}

.progress-indicator.visible {
    display: block;
}

    </style>
</head>
<body>
    <div class="contenedor0">
        <h1>Módulo III: El trabajo en equipo en las organizaciones</h1>
        <h2>Introducción</h2>
    </div>

    <div class="progress-indicator" id="progress-indicator">
        <p>✅ Esta actividad ha sido marcada como completada en tu progreso</p>
    </div>

    <div class="contenedor">
        <h3>“El equipo aprende cuando desarrolla sus estrategias, sus tácticas, sus técnicas,
            pero no se limita a ellas, sino está en una constante búsqueda de la creatividad.”</h3>  
        <h3>Víctor Espinosa</h3>
    </div>

    <div class="conte0">
        <p>En la actualidad, el trabajo en equipo es la herramienta más utilizada en las organizaciones, debido a que se ha considerado como un medio eficaz para alcanzar los objetivos tanto personales como aquellos que impactan directamente a la empresa. 
        </p>

        <p>¿Por qué ha sucedido esto?, ¿de qué manera el trabajo en equipo ha beneficiado a las organizaciones?, ¿cuál será la relación entre el trabajo en equipo y la productividad?
        </p>

        <p>
            Al respecto, se puede señalar que no es la técnica en sí misma la que genera estos resultados, sino las personas que conforman el equipo. En ellas está la posibilidad de conjuntar esfuerzos para conseguir las metas; sin embargo, el hecho de trabajar en equipo forma en las personas un aprendizaje que va más allá del conocimiento propio de sus tareas, ya que a partir de este, se promueve un enriquecimiento personal y profesional. 
        </p>

        <p>En este módulo se representa la manera como el trabajo en equipo es valorado en el contexto laboral y los beneficios que ofrece para los colaboradores, las organizaciones y la productividad.</p>
    </div>

    <div class="objetivos">
        <h4>Objetivo particular</h4>
        <p>Valorar los diferentes aspectos que se interponen al trabajar en equipo con el propósito de incrementar la productividad.
        </p>
    </div>

    <div class="temario">
        <h4>Temario</h4>
        <p>En este módulo revisaremos:<br><br>
            1. La planeación del trabajo en equipo. <br><br>
            2. ¿Cómo resolver problemas al trabajar en equipo?<br><br>
            3. Factores que posibilitan el enriquecimiento del trabajo en equipo.
            </p>
    </div>

    <div class="MC">
        <h4>Mapa conceptual</h4>
        <img src="Mapa-Conceptual-M3.png" alt="Mapa Conceptual Módulo 3" width="53%">
    </div>

    <div class="esquema">
        <h4>Esquema conceptual</h4>
        <iframe src="esquema3.html" width="100%" height="1230" frameborder="0"></iframe>
    </div>

    <div class="page-navigation">
        <button class="nav-btn prev" onclick="goBack()">
            <i class="fas fa-arrow-left"></i> Volver al Curso
        </button>
        
        <button class="nav-btn next" onclick="goNext()">
            Siguiente Tema <i class="fas fa-arrow-right"></i>
        </button>
    </div>

    <!-- Font Awesome para iconos -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <script>
        // ==========================
        // SISTEMA DE SINCRONIZACIÓN
        // ==========================
        
        // ID de la actividad actual (debe coincidir con el ID en la página principal)
        const CURRENT_ACTIVITY_ID = 'activity-3-0';
        
        // Función para marcar la actividad como completada
        function markActivityCompleted() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            // Obtener el progreso actual del usuario
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            let progressData = savedProgress ? JSON.parse(savedProgress) : {};
            
            // Marcar esta actividad como completada
            progressData[CURRENT_ACTIVITY_ID] = true;
            
            // Guardar en localStorage
            localStorage.setItem(progressKey, JSON.stringify(progressData));
            
            // Disparar evento para sincronizar otras pestañas
            window.dispatchEvent(new Event('storage'));
            
            // Mostrar indicador de progreso
            document.getElementById('progress-indicator').classList.add('visible');
            
            return true;
        }
        
        // Función para verificar si la actividad ya está completada
        function checkActivityStatus() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return false;
            
            const progressKey = `progress_${currentUser.companyId}_${currentUser.fullname}`;
            const savedProgress = localStorage.getItem(progressKey);
            
            if (savedProgress) {
                const progressData = JSON.parse(savedProgress);
                if (progressData[CURRENT_ACTIVITY_ID]) {
                    document.getElementById('progress-indicator').classList.add('visible');
                    return true;
                }
            }
            
            return false;
        }
        
        // Función para navegar al siguiente tema
        function goNext() {
            // Primero marcar como completado si no lo está
            if (!checkActivityStatus()) {
                markActivityCompleted();
            }
            
            // Navegar al Tema 1
            window.location.href = '../MODULO3/1/Tema1.html';
        }
        
        // Función para volver al curso
        function goBack() {
            window.location.href = '../index.html'; // Ajusta según tu estructura
        }
        
        // Cuando la página carga, verificar el estado de la actividad
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar si hay un usuario logueado
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser) {
                // Si la actividad no está marcada como completada, marcarla
                if (!checkActivityStatus()) {
                    markActivityCompleted();
                }
            } else {
                // Si no hay usuario, ocultar los botones de navegación
                document.querySelector('.page-navigation').style.display = 'none';
                alert('Por favor, inicia sesión en el curso primero.');
            }
        });
        
        // Escuchar eventos de storage para actualizaciones desde otras pestañas
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('progress_')) {
                checkActivityStatus();
            }
        });
    </script>
</body>
</html>